!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("twilio-video-app-react",[],t):"object"==typeof exports?exports["twilio-video-app-react"]=t():e["twilio-video-app-react"]=t()}(window,(function(){return function(e){var t={};function n(a){if(t[a])return t[a].exports;var r=t[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(a,r,function(t){return e[t]}.bind(null,r));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=47)}([function(e,t){e.exports=require("react")},function(e,t){e.exports=require("@material-ui/core")},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(0),r=n(29);function o(){const e=Object(a.useContext)(r.a);if(!e)throw new Error("useVideoContext must be used within a VideoProvider");return e}},function(e,t){e.exports=require("@material-ui/core/styles")},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return m}));var a=n(0),r=n.n(a),o=n(5),i=n(35),c=n(36),l=n(37),s=function(e,t,n,a){return new(n||(n=Promise))((function(r,o){function i(e){try{l(a.next(e))}catch(e){o(e)}}function c(e){try{l(a.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,c)}l((a=a.apply(e,t||[])).next())}))};const u=Object(a.createContext)(null);function d(t){const[n,d]=Object(a.useState)(null),[m,p]=Object(a.useState)(!1),[f,h]=Object(i.a)(),[b,g]=Object(a.useReducer)(o.c,o.a);let v={error:n,setError:d,isFetching:m,activeSinkId:f,setActiveSinkId:h,settings:b,dispatchSetting:g};v="firebase"===e.env.REACT_APP_SET_AUTH?Object.assign(Object.assign({},v),Object(c.a)()):"passcode"===e.env.REACT_APP_SET_AUTH?Object.assign(Object.assign({},v),Object(l.a)()):Object.assign(Object.assign({},v),{getToken:(t,n)=>s(this,void 0,void 0,(function*(){const a=new window.Headers,r=e.env.REACT_APP_TOKEN_ENDPOINT||"/token",o=new window.URLSearchParams({identity:t,roomName:n});return fetch(`${r}?${o}`,{headers:a}).then(e=>e.text())}))});return r.a.createElement(u.Provider,{value:Object.assign(Object.assign({},v),{getToken:(e,t)=>(p(!0),v.getToken(e,t).then(e=>(p(!1),e)).catch(e=>(d(e),p(!1),Promise.reject(e))))})},t.children)}function m(){const e=Object(a.useContext)(u);if(!e)throw new Error("useAppState must be used within the AppStateProvider");return e}}).call(this,n(19))},function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return o}));const a={trackSwitchOffMode:void 0,dominantSpeakerPriority:"standard",bandwidthProfileMode:"collaboration",maxTracks:n(12).a?"5":"10",maxAudioBitrate:"16000",renderDimensionLow:"low",renderDimensionStandard:"960p",renderDimensionHigh:"wide1080p"},r=(()=>{const e={};for(const t in a)e[t]=t;return e})();function o(e,t){return Object.assign(Object.assign({},e),{[t.name]:"default"===t.value?void 0:t.value})}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"e",(function(){return i})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return l})),n.d(t,"d",(function(){return s}));var a=n(0);function r(){const[e,t]=Object(a.useState)([]);return Object(a.useEffect)(()=>{const e=()=>navigator.mediaDevices.enumerateDevices().then(e=>t(e));return navigator.mediaDevices.addEventListener("devicechange",e),e(),()=>{navigator.mediaDevices.removeEventListener("devicechange",e)}},[]),e}function o(){return r().filter(e=>"audioinput"===e.kind)}function i(){return r().filter(e=>"videoinput"===e.kind)}function c(){return r().filter(e=>"audiooutput"===e.kind)}function l(){return o().length>0}function s(){return i().length>0}},function(e,t){e.exports=require("@material-ui/core/Button")},function(e,t){e.exports=require("twilio-video")},function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return i}));const a={width:1280,height:720,frameRate:24},r="TwilioVideoApp-selectedAudioInput",o="TwilioVideoApp-selectedAudioOutput",i="TwilioVideoApp-selectedVideoInput"},function(e,t){e.exports=require("@material-ui/core/Typography")},function(e,t){e.exports=require("clsx")},function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return i}));var a=n(34),r=n.n(a);const o="undefined"!=typeof navigator&&"string"==typeof navigator.userAgent&&/Mobile/.test(navigator.userAgent);function i(e){if(!r()(e))return e;const t={};for(const n in e){const a=e[n];void 0!==a&&(t[n]=i(a))}return t}},function(e,t){e.exports=require("@material-ui/core/DialogContentText")},function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return c}));var a=n(0),r=n.n(a);const o=Object(a.createContext)(null);function i(){const[e,t]=Object(a.useContext)(o);return[e,t]}function c({room:e,children:t}){const[n,i]=Object(a.useState)(null);return Object(a.useEffect)(()=>{const t=()=>i(null),n=e=>i(t=>t===e?null:t);return e.on("disconnected",t),e.on("participantDisconnected",n),()=>{e.off("disconnected",t),e.off("participantDisconnected",n)}},[e]),r.a.createElement(o.Provider,{value:[n,e=>i(t=>t===e?null:e)]},t)}},function(e,t){e.exports=require("@material-ui/core/MenuItem")},function(e,t){e.exports=require("react-router-dom")},function(e,t){e.exports=require("@material-ui/core/Menu")},function(e,t){e.exports=require("firebase/app")},function(e,t){var n,a,r=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function c(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{a="function"==typeof clearTimeout?clearTimeout:i}catch(e){a=i}}();var l,s=[],u=!1,d=-1;function m(){u&&l&&(u=!1,l.length?s=l.concat(s):d=-1,s.length&&p())}function p(){if(!u){var e=c(m);u=!0;for(var t=s.length;t;){for(l=s,s=[];++d<t;)l&&l[d].run();d=-1,t=s.length}l=null,u=!1,function(e){if(a===clearTimeout)return clearTimeout(e);if((a===i||!a)&&clearTimeout)return a=clearTimeout,clearTimeout(e);try{a(e)}catch(t){try{return a.call(null,e)}catch(t){return a.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function h(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];s.push(new f(e,t)),1!==s.length||u||c(p)},f.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=h,r.addListener=h,r.once=h,r.off=h,r.removeListener=h,r.removeAllListeners=h,r.emit=h,r.prependListener=h,r.prependOnceListener=h,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(0),r=n(2);function o(){const{room:{localParticipant:e},localTracks:t,getLocalVideoTrack:n,removeLocalVideoTrack:o,onError:i}=Object(r.a)(),c=t.find(e=>e.name.includes("camera")),[l,s]=Object(a.useState)(!1),u=Object(a.useRef)(),d=Object(a.useCallback)(()=>{if(!l)if(c){u.current=c.mediaStreamTrack.getSettings().deviceId;const t=null==e?void 0:e.unpublishTrack(c);null==e||e.emit("trackUnpublished",t),o()}else s(!0),n({deviceId:{exact:u.current}}).then(t=>null==e?void 0:e.publishTrack(t,{priority:"low"})).catch(i).finally(()=>s(!1))},[c,e,n,l,i,o]);return[!!c,d]}},function(e,t,n){"use strict";(function(e){var a=n(0),r=n.n(a),o=n(7),i=n.n(o),c=n(22),l=n.n(c),s=n(23),u=n.n(s),d=n(24),m=n.n(d),p=n(13),f=n.n(p),h=n(25),b=n.n(h),g=n(32),v=n.n(g),E=n(38),w=n(8),k=n.n(w),y=n(4);t.a=function({open:t,onClose:n}){const{roomType:a}=Object(y.b)();return r.a.createElement(l.a,{open:t,onClose:n,fullWidth:!0,maxWidth:"xs"},r.a.createElement(b.a,null,"About"),r.a.createElement(v.a,null),r.a.createElement(m.a,null,r.a.createElement(f.a,null,"Browser supported: ",String(k.a.isSupported)),r.a.createElement(f.a,null,"SDK Version: ",k.a.version),r.a.createElement(f.a,null,"App Version: ",E.a),r.a.createElement(f.a,null,"Deployed Tag: ",e.env.REACT_APP_GIT_TAG||"N/A"),r.a.createElement(f.a,null,"Deployed Commit Hash: ",e.env.REACT_APP_GIT_COMMIT||"N/A"),a&&r.a.createElement(f.a,null,"Room Type: ",a)),r.a.createElement(v.a,null),r.a.createElement(u.a,null,r.a.createElement(i.a,{onClick:n,color:"primary",variant:"contained",autoFocus:!0},"OK")))}}).call(this,n(19))},function(e,t){e.exports=require("@material-ui/core/Dialog")},function(e,t){e.exports=require("@material-ui/core/DialogActions")},function(e,t){e.exports=require("@material-ui/core/DialogContent")},function(e,t){e.exports=require("@material-ui/core/DialogTitle")},function(e,t){e.exports=require("@material-ui/icons/ExpandMore")},function(e,t){e.exports=require("@material-ui/icons/MoreVert")},function(e,t){e.exports=require("@material-ui/core/Tooltip")},function(e,t,n){"use strict";n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return g}));var a=n(0),r=n.n(a),o=n(14),i=n(12),c=n(20),l=n(2);function s(){const{room:e}=Object(l.a)(),[t,n]=Object(c.a)(),r=Object(a.useRef)(!1);return Object(a.useEffect)(()=>{if(i.a){const e=()=>{"hidden"===document.visibilityState&&t?(r.current=!0,n()):r.current&&(r.current=!1,n())};return document.addEventListener("visibilitychange",e),()=>{document.removeEventListener("visibilitychange",e)}}},[t,e,n]),null}var u=n(9),d=n(8),m=n.n(d),p=n(6);var f=n(31),h=n.n(f);window.TwilioVideo=m.a;const b=Object(a.createContext)(null);function g({options:e,children:t,onError:n=(()=>{}),onDisconnect:c=(()=>{})}){const l=e=>{console.log("ERROR: "+e.message,e),n(e)},{localTracks:d,getLocalVideoTrack:f,getLocalAudioTrack:g,isAcquiringLocalTracks:v,removeLocalVideoTrack:E,getAudioAndVideoTracks:w}=function(){const[e,t]=Object(a.useState)(),[n,r]=Object(a.useState)(),[o,i]=Object(a.useState)(!1),c=Object(p.a)(),l=Object(p.e)(),s=c.length>0,d=l.length>0,f=Object(a.useCallback)(e=>{const n={};return e&&(n.deviceId={exact:e}),m.a.createLocalAudioTrack(n).then(e=>(t(e),e))},[]),h=Object(a.useCallback)(e=>{const t=Object.assign(Object.assign(Object.assign({},u.a),{name:"camera-"+Date.now()}),e);return m.a.createLocalVideoTrack(t).then(e=>(r(e),e))},[]),b=Object(a.useCallback)(()=>{n&&(n.stop(),r(void 0))},[n]),g=Object(a.useCallback)(()=>{if(!s&&!d)return Promise.resolve();if(e||n)return Promise.resolve();i(!0);const a=window.localStorage.getItem(u.b),o=window.localStorage.getItem(u.d),p=c.some(e=>a&&e.deviceId===a),f=l.some(e=>o&&e.deviceId===o),h={video:d&&Object.assign(Object.assign(Object.assign({},u.a),{name:"camera-"+Date.now()}),f&&{deviceId:{exact:o}}),audio:p?{deviceId:{exact:a}}:s};return m.a.createLocalTracks(h).then(e=>{const n=e.find(e=>"video"===e.kind),a=e.find(e=>"audio"===e.kind);n&&r(n),a&&t(a)}).finally(()=>i(!1))},[s,d,e,n,c,l]);return{localTracks:[e,n].filter(e=>void 0!==e),getLocalVideoTrack:h,getLocalAudioTrack:f,isAcquiringLocalTracks:o,removeLocalVideoTrack:b,getAudioAndVideoTracks:g}}(),{room:k,isConnecting:y,connect:C}=function(e,t,n){const[r,o]=Object(a.useState)(new h.a),[c,l]=Object(a.useState)(!1),s=Object(a.useRef)(n);return Object(a.useEffect)(()=>{s.current=n},[n]),{room:r,isConnecting:c,connect:Object(a.useCallback)(n=>(l(!0),m.a.connect(n,Object.assign(Object.assign({},s.current),{tracks:e})).then(e=>{o(e);const t=()=>e.disconnect();e.setMaxListeners(15),e.once("disconnected",()=>{setTimeout(()=>o(new h.a)),window.removeEventListener("beforeunload",t),i.a&&window.removeEventListener("pagehide",t)}),window.twilioRoom=e,e.localParticipant.videoTracks.forEach(e=>e.setPriority("low")),l(!1),window.addEventListener("beforeunload",t),i.a&&window.addEventListener("pagehide",t)},e=>{t(e),l(!1)})),[e,t])}}(d,l,e);!function(e,t){Object(a.useEffect)(()=>{const n=(e,n)=>{n&&t(n)};return e.on("disconnected",n),()=>{e.off("disconnected",n)}},[e,t])}(k,n),function(e,t){const{localParticipant:n}=e;Object(a.useEffect)(()=>{if(n)return n.on("trackPublicationFailed",t),()=>{n.off("trackPublicationFailed",t)}},[n,t])}(k,n),function(e,t){Object(a.useEffect)(()=>(e.on("disconnected",t),()=>{e.off("disconnected",t)}),[e,t])}(k,c);const[x,O]=function(e,t){const[n,r]=Object(a.useState)(!1),o=Object(a.useRef)(null),i=Object(a.useCallback)(()=>{navigator.mediaDevices.getDisplayMedia({audio:!1,video:{frameRate:10,height:1080,width:1920}}).then(n=>{const a=n.getTracks()[0];e.localParticipant.publishTrack(a,{name:"screen",priority:"low"}).then(t=>{o.current=()=>{e.localParticipant.unpublishTrack(a),e.localParticipant.emit("trackUnpublished",t),a.stop(),r(!1)},a.onended=o.current,r(!0)}).catch(t)}).catch(e=>{"AbortError"!==e.name&&"NotAllowedError"!==e.name&&t(e)})},[e,t]),c=Object(a.useCallback)(()=>{n?o.current():i()},[n,i,o]);return[n,c]}(k,n);return r.a.createElement(b.Provider,{value:{room:k,localTracks:d,isConnecting:y,onError:l,onDisconnect:c,getLocalVideoTrack:f,getLocalAudioTrack:g,connect:C,isAcquiringLocalTracks:v,removeLocalVideoTrack:E,isSharingScreen:x,toggleScreenShare:O,getAudioAndVideoTracks:w}},r.a.createElement(o.a,{room:k},t),r.a.createElement(s,null))}},function(e,t){e.exports=require("nanoid")},function(e,t){e.exports=require("events")},function(e,t){e.exports=require("@material-ui/core/Divider")},function(e,t){e.exports=require("@material-ui/core/Avatar")},function(e,t){e.exports=require("is-plain-object")},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(0),r=n(9),o=n(6);function i(){const e=Object(o.b)(),[t,n]=Object(a.useState)("default"),i=Object(a.useCallback)(e=>{window.localStorage.setItem(r.c,e),n(e)},[n]);return Object(a.useEffect)(()=>{const t=window.localStorage.getItem(r.c);e.some(e=>t&&e.deviceId===t)&&n(t)},[e]),[t,i]}},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return c}));var a=n(0),r=n(18),o=(n(48),function(e,t,n,a){return new(n||(n=Promise))((function(r,o){function i(e){try{l(a.next(e))}catch(e){o(e)}}function c(e){try{l(a.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,c)}l((a=a.apply(e,t||[])).next())}))});const i={apiKey:e.env.REACT_APP_FIREBASE_API_KEY,authDomain:e.env.REACT_APP_FIREBASE_AUTH_DOMAIN,databaseURL:e.env.REACT_APP_FIREBASE_DATABASE_URL,storageBucket:e.env.REACT_APP_FIREBASE_STORAGE_BUCKET,messagingSenderId:e.env.REACT_APP_FIREBASE_MESSAGING_SENDER_ID};function c(){const[t,n]=Object(a.useState)(null),[c,l]=Object(a.useState)(!1),s=Object(a.useCallback)((n,a)=>o(this,void 0,void 0,(function*(){const r=new window.Headers,o=yield t.getIdToken();r.set("Authorization",o);const i=e.env.REACT_APP_TOKEN_ENDPOINT||"/token",c=new window.URLSearchParams({identity:n,roomName:a});return fetch(`${i}?${c}`,{headers:r}).then(e=>e.text())})),[t]);Object(a.useEffect)(()=>{r.initializeApp(i),r.auth().onAuthStateChanged(e=>{n(e),l(!0)})},[]);const u=Object(a.useCallback)(()=>{const e=new r.auth.GoogleAuthProvider;return e.addScope("https://www.googleapis.com/auth/plus.login"),r.auth().signInWithPopup(e).then(e=>{n(e.user)})},[]),d=Object(a.useCallback)(()=>r.auth().signOut().then(()=>{n(null)}),[]);return{user:t,signIn:u,signOut:d,isAuthReady:c,getToken:s}}}).call(this,n(19))},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n(0),r=n(16),o=function(e,t,n,a){return new(n||(n=Promise))((function(r,o){function i(e){try{l(a.next(e))}catch(e){o(e)}}function c(e){try{l(a.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,c)}l((a=a.apply(e,t||[])).next())}))};function i(e,t,n,a=!0){return fetch("/token",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({user_identity:e,room_name:t,passcode:n,create_room:a})})}function c(e){return i("temp-name","temp-room",e,!1).then(e=>o(this,void 0,void 0,(function*(){var t;const n=yield e.json();return 401===e.status?{isValid:!1,error:null===(t=n.error)||void 0===t?void 0:t.message}:e.ok&&n.token?{isValid:!0}:void 0})))}function l(e){switch(e){case"passcode incorrect":return"Passcode is incorrect";case"passcode expired":return"Passcode has expired";default:return e}}function s(){const e=Object(r.useHistory)(),[t,n]=Object(a.useState)(null),[s,u]=Object(a.useState)(!1),[d,m]=Object(a.useState)(),p=Object(a.useCallback)((e,n)=>i(e,n,t.passcode).then(e=>o(this,void 0,void 0,(function*(){var t;if(e.ok)return e;const n=l((null===(t=(yield e.json()).error)||void 0===t?void 0:t.message)||e.statusText);throw Error(n)}))).then(e=>e.json()).then(e=>(m(e.room_type),e.token)),[t]);Object(a.useEffect)(()=>{const t=function(){const e=window.location.search.match(/passcode=(.*)&?/);return e?e[1]:window.sessionStorage.getItem("passcode")}();t?c(t).then(a=>{(null==a?void 0:a.isValid)&&(n({passcode:t}),window.sessionStorage.setItem("passcode",t),e.replace(window.location.pathname))}).then(()=>u(!0)):u(!0)},[e]);const f=Object(a.useCallback)(e=>c(e).then(t=>{if(!(null==t?void 0:t.isValid))throw new Error(l(null==t?void 0:t.error));n({passcode:e}),window.sessionStorage.setItem("passcode",e)}),[]),h=Object(a.useCallback)(()=>(n(null),window.sessionStorage.removeItem("passcode"),Promise.resolve()),[]);return{user:t,isAuthReady:s,getToken:p,signIn:f,signOut:h,roomType:d}}},function(e){e.exports=JSON.parse('{"a":"0.2.0"}')},function(e,t){e.exports=require("d3-timer")},function(e,t,n){"use strict";(function(e){var a=n(0),r=n.n(a),o=n(1),i=n(26),c=n.n(i),l=n(4),s=n(41),u=n(17),d=n.n(u),m=n(2);const p=Object(o.makeStyles)({userContainer:{position:"absolute",top:0,right:0,margin:"1em",display:"flex",alignItems:"center"},userButton:{color:"white"},logoutLink:{color:"white",cursor:"pointer",padding:"10px 20px"}});t.a=()=>{const t=p(),{user:n,signOut:i}=Object(l.b)(),{localTracks:u}=Object(m.a)(),[f,h]=Object(a.useState)(!1),b=Object(a.useRef)(null),g=Object(a.useCallback)(()=>{u.forEach(e=>e.stop()),null==i||i()},[u,i]);return"passcode"===e.env.REACT_APP_SET_AUTH?r.a.createElement("div",{className:t.userContainer},r.a.createElement(o.Link,{onClick:g,className:t.logoutLink},"Logout")):"firebase"===e.env.REACT_APP_SET_AUTH?r.a.createElement("div",{className:t.userContainer},r.a.createElement(s.a,{user:n}),r.a.createElement(o.Button,{onClick:()=>h(e=>!e),ref:b,className:t.userButton},n.displayName,r.a.createElement(c.a,null)),r.a.createElement(d.a,{open:f,onClose:()=>h(e=>!e),anchorEl:b.current,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},r.a.createElement(o.MenuItem,{onClick:g},r.a.createElement(o.Typography,{variant:"body1"},"Logout")))):null}}).call(this,n(19))},function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var a=n(0),r=n.n(a),o=n(33),i=n.n(o),c=n(42),l=n.n(c),s=n(43),u=n.n(s);const d=l()({red:{color:"white",backgroundColor:"#F22F46"}});function m({user:e}){const t=d(),{displayName:n,photoURL:a}=e;return a?r.a.createElement(i.a,{src:a}):r.a.createElement(i.a,{className:t.red},n?n.split(" ").map(e=>e[0]).join("").toUpperCase():r.a.createElement(u.a,null))}},function(e,t){e.exports=require("@material-ui/styles/makeStyles")},function(e,t){e.exports=require("@material-ui/icons/Person")},function(e,t){e.exports=require("@material-ui/icons/Close")},function(e,t){e.exports=require("@material-ui/core/Snackbar")},function(e,t){e.exports=require("@material-ui/core/SvgIcon")},function(e,t,n){e.exports=n(49)},function(e,t){e.exports=require("firebase/auth")},function(e,t,n){"use strict";n.r(t);var a=n(4),r=n(0),o=n.n(r),i=n(3),c=n(7),l=n.n(c),s=n(11),u=n.n(s),d=n(1),m=n(2);const p=Object(i.makeStyles)(e=>Object(i.createStyles)({button:{background:e.brand,color:"white","&:hover":{background:"#600101"}}}));function f(e){const t=p(),{room:n}=Object(m.a)();return o.a.createElement(d.Button,{onClick:()=>n.disconnect(),className:u()(t.button,e.className),"data-cy-disconnect":!0},"Disconnect")}var h=n(9);function b(){return o.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"25",height:"24",viewBox:"0 0 25 24"},o.a.createElement("g",{fill:"none",fillRule:"evenodd"},o.a.createElement("g",{fill:"#707578"},o.a.createElement("path",{d:"M12 3.5c4.694 0 8.5 3.806 8.5 8.5s-3.806 8.5-8.5 8.5-8.5-3.806-8.5-8.5S7.306 3.5 12 3.5zm0 1c-4.142 0-7.5 3.358-7.5 7.5 0 4.142 3.358 7.5 7.5 7.5 4.142 0 7.5-3.358 7.5-7.5 0-4.142-3.358-7.5-7.5-7.5zm1.367 3.429C14.959 8.492 16.1 10.215 16.1 12c0 1.16-.481 2.294-1.256 3.1h.356c.245 0 .45.177.492.41l.008.09c0 .245-.177.45-.41.492l-.09.008h-2.008l-.048-.003-.034-.005c-.088-.017-.167-.055-.233-.11l-.06-.06c-.037-.044-.067-.096-.087-.151l-.001-.004-.012-.04c-.004-.012-.007-.024-.009-.037v-.005c-.005-.024-.006-.042-.007-.06L12.7 13.6c0-.276.224-.5.5-.5.245 0 .45.177.492.41l.008.09v1.176c.833-.6 1.4-1.676 1.4-2.776 0-1.373-.886-2.71-2.067-3.129-.26-.092-.396-.377-.304-.638.092-.26.378-.396.638-.304zm-2.559-.03c.03.001.058.004.086.01l.062.016.018.006c.04.015.075.034.108.056.086.059.152.143.188.242l.001.004.008.025c.006.017.01.034.013.052l.008.09v2c0 .276-.224.5-.5.5-.245 0-.45-.177-.492-.41l-.008-.09V9.224c-.833.6-1.4 1.676-1.4 2.776 0 1.373.886 2.71 2.067 3.129.26.092.396.377.304.638-.092.26-.378.396-.638.304C9.041 15.508 7.9 13.785 7.9 12c0-1.16.481-2.294 1.255-3.1H8.8c-.245 0-.45-.177-.492-.41L8.3 8.4c0-.245.177-.45.41-.492L8.8 7.9h2.008z",transform:"translate(-233 -689) translate(-1 673) translate(37 16) translate(197.298)"}))))}function g(e){const[t,n]=Object(r.useState)(null==e?void 0:e.mediaStreamTrack);return Object(r.useEffect)(()=>{if(n(null==e?void 0:e.mediaStreamTrack),e){const t=()=>n(e.mediaStreamTrack);return e.on("started",t),()=>{e.off("started",t)}}},[e]),t}var v=n(6);function E(){const{localTracks:e}=Object(m.a)(),[t,n]=Object(r.useState)(null),a=e.find(e=>e.name.includes("camera")),i=g(a),c=Object(v.e)();Object(r.useEffect)(()=>{(null==i?void 0:i.getSettings().facingMode)&&null===t&&n(!0)},[i,t]);const l=Object(r.useCallback)(()=>{const e="user"===(null==i?void 0:i.getSettings().facingMode)?"environment":"user";a.restart(Object.assign(Object.assign({},h.a),{facingMode:e}))},[i,a]);return t&&c.length>1?o.a.createElement(d.Button,{onClick:l,disabled:!a,startIcon:o.a.createElement(b,null)},"Flip Camera"):null}var w=n(21),k=n(39);function y(e){const[t,n]=Object(r.useState)(!!e&&e.isEnabled);return Object(r.useEffect)(()=>{if(n(!!e&&e.isEnabled),e){const t=()=>n(!0),a=()=>n(!1);return e.on("enabled",t),e.on("disabled",a),()=>{e.off("enabled",t),e.off("disabled",a)}}},[e]),t}let C=0;const x=window.AudioContext||window.webkitAudioContext;let O;function j(e){O=O||new x;const t=O.createMediaStreamSource(e),n=O.createAnalyser();return n.smoothingTimeConstant=.2,n.fftSize=256,t.connect(n),n}var S=o.a.memo((function({audioTrack:e,color:t="white"}){const n=Object(r.useRef)(null),[a,i]=Object(r.useState)(),c=y(e),l=g(e);Object(r.useEffect)(()=>{if(e&&l&&c){let t=new MediaStream([l.clone()]);const n=()=>t.getTracks().forEach(e=>e.stop());e.on("stopped",n);const a=()=>{n(),t=new MediaStream([l.clone()]),i(j(t))};return i(j(t)),window.addEventListener("focus",a),()=>{n(),window.removeEventListener("focus",a),e.off("stopped",n)}}},[c,l,e]),Object(r.useEffect)(()=>{const e=n.current;if(c&&e&&a){const t=new Uint8Array(a.frequencyBinCount),n=Object(k.interval)(()=>{a.getByteFrequencyData(t);let n=0;const r=t.length;for(let e=0;e<r;e++)n+=t[e];const o=Math.min(14,Math.max(0,7*Math.log10(n/r/3)));null==e||e.setAttribute("y",String(14-o))},100);return()=>{e.setAttribute("y","14"),n.stop()}}},[c,a]);const s="audio-level-clip-"+C++;return c?o.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24","data-test-audio-indicator":!0},o.a.createElement("defs",null,o.a.createElement("clipPath",{id:s},o.a.createElement("rect",{ref:n,x:"0",y:"14",width:"24",height:"24"}))),o.a.createElement("g",{fill:"none",fillRule:"evenodd",transform:"translate(.5)"},o.a.createElement("rect",{clipPath:`url(#${s})`,width:"5.2",height:"10",x:"9.5",y:"3.5",rx:"6",ry:"3",fill:"#23BF6E"}),o.a.createElement("path",{fill:t,strokeWidth:"0",d:"M17.389 10.667c.276 0 .5.224.5.5 0 3.114-2.396 5.67-5.445 5.923v2.632c0 .276-.223.5-.5.5-.245 0-.45-.177-.491-.41l-.009-.09V17.09C8.395 16.836 6 14.281 6 11.167c0-.276.224-.5.5-.5s.5.224.5.5c0 2.73 2.214 4.944 4.944 4.944 2.731 0 4.945-2.214 4.945-4.944 0-.276.224-.5.5-.5zM11.944 4c1.566 0 2.834 1.268 2.834 2.833v4.334c0 1.564-1.268 2.833-2.834 2.833-1.564 0-2.833-1.27-2.833-2.833V6.833C9.111 5.268 10.38 4 11.944 4zm0 1c-1.012 0-1.833.82-1.833 1.833v4.334c0 1.012.822 1.833 1.833 1.833 1.013 0 1.834-.82 1.834-1.833V6.833c0-1.013-.82-1.833-1.834-1.833z"}))):o.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",transform:"translate(-0.5, 0)","data-test-audio-mute-icon":!0},o.a.createElement("g",{fill:"none",fillRule:"evenodd"},o.a.createElement("path",{fill:t,strokeWidth:"0",d:"M11.889 6.667c.276 0 .5.224.5.5 0 3.114-2.396 5.67-5.445 5.923v2.632c0 .276-.223.5-.5.5-.245 0-.45-.177-.491-.41l-.009-.09V13.09c-1.116-.093-2.145-.494-3-1.119l.717-.717c.793.54 1.751.857 2.783.857 2.731 0 4.945-2.214 4.945-4.944 0-.276.224-.5.5-.5zM1 6.667c.276 0 .5.224.5.5 0 .975.282 1.884.77 2.65l-.722.721C.888 9.58.5 8.418.5 7.167c0-.276.224-.5.5-.5zm8.277-1.031v1.53C9.278 8.732 8.01 10 6.445 10c-.446 0-.868-.103-1.243-.287l.776-.773c.149.039.306.06.467.06.963 0 1.751-.74 1.828-1.683l.006-.15v-.531l1-1zM6.444 0C8.01 0 9.278 1.268 9.278 2.833l-.002-.025-.999.999v-.974c0-.962-.74-1.75-1.682-1.827L6.445 1c-.962 0-1.751.74-1.828 1.683l-.006.15v4.334c0 .097.008.192.022.285l-.804.805c-.112-.269-.184-.558-.209-.86l-.009-.23V2.833C3.611 1.268 4.88 0 6.444 0z",transform:"translate(6.5 4)"}),o.a.createElement("path",{fill:"red",strokeWidth:"0",d:"M12.146.646c.196-.195.512-.195.708 0 .173.174.192.443.057.638l-.057.07-12 12c-.196.195-.512.195-.708 0-.173-.174-.192-.443-.057-.638l.057-.07 12-12z",transform:"translate(6.5 4)"})))}));function T(){const e=Object(v.a)(),{localTracks:t}=Object(m.a)(),n=t.find(e=>"audio"===e.kind),a=g(n),r=null==a?void 0:a.getSettings().deviceId;return o.a.createElement("div",null,o.a.createElement(d.Typography,{variant:"subtitle2",gutterBottom:!0},"Audio Input"),o.a.createElement(d.Grid,{container:!0,alignItems:"center",justify:"space-between"},o.a.createElement("div",{className:"inputSelect"},e.length>1?o.a.createElement(d.FormControl,{fullWidth:!0},o.a.createElement(d.Select,{onChange:e=>{return t=e.target.value,window.localStorage.setItem(h.b,t),void(null==n||n.restart({deviceId:{exact:t}}));var t},value:r||"",variant:"outlined"},e.map(e=>o.a.createElement(d.MenuItem,{value:e.deviceId,key:e.deviceId},e.label)))):o.a.createElement(d.Typography,null,(null==n?void 0:n.mediaStreamTrack.label)||"No Local Audio")),o.a.createElement(S,{audioTrack:n,color:"black"})))}function N(){var e;const t=Object(v.b)(),{activeSinkId:n,setActiveSinkId:r}=Object(a.b)(),i=null===(e=t.find(e=>e.deviceId===n))||void 0===e?void 0:e.label;return o.a.createElement("div",{className:"inputSelect"},t.length>1?o.a.createElement(d.FormControl,{fullWidth:!0},o.a.createElement(d.Typography,{variant:"subtitle2",gutterBottom:!0},"Audio Output"),o.a.createElement(d.Select,{onChange:e=>r(e.target.value),value:n,variant:"outlined"},t.map(e=>o.a.createElement(d.MenuItem,{value:e.deviceId,key:e.deviceId},e.label)))):o.a.createElement(o.a.Fragment,null,o.a.createElement(d.Typography,{variant:"subtitle2"},"Audio Output"),o.a.createElement(d.Typography,null,i||"System Default Audio Output")))}const P=Object(i.styled)("video")({width:"100%",height:"100%"});function L({track:e,isLocal:t,priority:n}){var a,i;const c=Object(r.useRef)(null),l=g(e),s=function(e){const[t,n]=Object(r.useState)(null==e?void 0:e.dimensions);return Object(r.useEffect)(()=>{if(n(null==e?void 0:e.dimensions),e){const t=e=>n(null==e?void 0:e.dimensions);return e.on("dimensionsChanged",t),()=>{e.off("dimensionsChanged",t)}}},[e]),t}(e),u=(null!==(a=null==s?void 0:s.height)&&void 0!==a?a:0)>(null!==(i=null==s?void 0:s.width)&&void 0!==i?i:0);Object(r.useEffect)(()=>{const t=c.current;return t.muted=!0,e.setPriority&&n&&e.setPriority(n),e.attach(t),()=>{e.detach(t),e.setPriority&&n&&e.setPriority(null)}},[e,n]);const d="environment"!==(null==l?void 0:l.getSettings().facingMode),m={transform:t&&d?"rotateY(180deg)":"",objectFit:u||e.name.includes("screen")?"contain":"cover"};return o.a.createElement(P,{ref:c,style:m})}const A=Object(i.makeStyles)({preview:{width:"300px",maxHeight:"200px",margin:"0.5em auto","& video":{maxHeight:"200px"}}});function I(){const e=A(),t=Object(v.e)(),{localTracks:n}=Object(m.a)(),a=n.find(e=>"video"===e.kind),r=g(a),i=null==r?void 0:r.getSettings().deviceId;return o.a.createElement("div",null,a&&o.a.createElement("div",{className:e.preview},o.a.createElement(L,{isLocal:!0,track:a})),t.length>1?o.a.createElement(d.FormControl,{fullWidth:!0},o.a.createElement(d.Typography,{variant:"subtitle2",gutterBottom:!0},"Video Input"),o.a.createElement(d.Select,{onChange:e=>{return t=e.target.value,window.localStorage.setItem(h.d,t),void a.restart(Object.assign(Object.assign({},h.a),{deviceId:{exact:t}}));var t},value:i||"",variant:"outlined"},t.map(e=>o.a.createElement(d.MenuItem,{value:e.deviceId,key:e.deviceId},e.label)))):o.a.createElement(o.a.Fragment,null,o.a.createElement(d.Typography,{variant:"subtitle2",gutterBottom:!0},"Video Input"),o.a.createElement(d.Typography,null,(null==a?void 0:a.mediaStreamTrack.label)||"No Local Video")))}const D=Object(i.makeStyles)(e=>({container:{width:"600px",minHeight:"400px",[e.breakpoints.down("xs")]:{width:"calc(100vw - 32px)"},"& .inputSelect":{width:"calc(100% - 35px)"}},button:{float:"right"},paper:{[e.breakpoints.down("xs")]:{margin:"16px"}},headline:{marginBottom:"1.3em",fontSize:"1.1rem"},listSection:{margin:"2em 0 0.8em","&:first-child":{margin:"1em 0 2em 0"}}}));function B({open:e,onClose:t}){const n=D();return o.a.createElement(d.Dialog,{open:e,onClose:t,classes:{paper:n.paper}},o.a.createElement(d.DialogTitle,null,"Audio and Video Settings"),o.a.createElement(d.Divider,null),o.a.createElement(d.DialogContent,{className:n.container},o.a.createElement("div",{className:n.listSection},o.a.createElement(d.Typography,{variant:"h6",className:n.headline},"Video"),o.a.createElement(I,null)),o.a.createElement(d.Divider,null),o.a.createElement("div",{className:n.listSection},o.a.createElement(d.Typography,{variant:"h6",className:n.headline},"Audio"),o.a.createElement(T,null)),o.a.createElement("div",{className:n.listSection},o.a.createElement(N,null))),o.a.createElement(d.Divider,null),o.a.createElement(d.DialogActions,null,o.a.createElement(d.Button,{color:"primary",variant:"contained",className:n.button,onClick:t},"Done")))}var M=n(26),R=n.n(M),z=n(17),F=n.n(z),V=n(15),H=n.n(V),_=n(27),q=n.n(_),G=n(10),W=n.n(G);function U(e){const t=Object(d.useMediaQuery)(e=>e.breakpoints.down("sm")),[n,a]=Object(r.useState)(!1),[i,c]=Object(r.useState)(!1),[s,u]=Object(r.useState)(!1),m=Object(r.useRef)(null);return o.a.createElement(o.a.Fragment,null,o.a.createElement(l.a,{onClick:()=>c(e=>!e),ref:m,className:e.buttonClassName},t?o.a.createElement(q.a,null):o.a.createElement(o.a.Fragment,null,"Settings",o.a.createElement(R.a,null))),o.a.createElement(F.a,{open:i,onClose:()=>c(e=>!e),anchorEl:m.current,anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:t?-55:"bottom",horizontal:"center"}},o.a.createElement(H.a,{onClick:()=>a(!0)},o.a.createElement(W.a,{variant:"body1"},"About")),o.a.createElement(H.a,{onClick:()=>u(!0)},o.a.createElement(W.a,{variant:"body1"},"Audio and Video Settings"))),o.a.createElement(w.a,{open:n,onClose:()=>{a(!1),c(!1)}}),o.a.createElement(B,{open:s,onClose:()=>{u(!1),c(!1)}}))}function Y(){const{room:e}=Object(m.a)(),[t,n]=Object(r.useState)("disconnected");return Object(r.useEffect)(()=>{const t=()=>n(e.state||"disconnected");return t(),e.on("disconnected",t).on("reconnected",t).on("reconnecting",t),()=>{e.off("disconnected",t).off("reconnected",t).off("reconnecting",t)}},[e]),t}function $(){return o.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"17",viewBox:"0 0 12 17"},o.a.createElement("path",{fill:"#707578",fillRule:"evenodd",d:"M11.389 6.667c.276 0 .5.224.5.5 0 3.114-2.396 5.67-5.445 5.923v2.632c0 .276-.223.5-.5.5-.245 0-.45-.177-.491-.41l-.009-.09V13.09C2.395 12.836 0 10.281 0 7.167c0-.276.224-.5.5-.5s.5.224.5.5c0 2.73 2.214 4.944 4.944 4.944 2.731 0 4.945-2.214 4.945-4.944 0-.276.224-.5.5-.5zM5.944 0C7.51 0 8.778 1.268 8.778 2.833v4.334C8.778 8.73 7.51 10 5.944 10 4.38 10 3.111 8.73 3.111 7.167V2.833C3.111 1.268 4.38 0 5.944 0zm0 1c-1.012 0-1.833.82-1.833 1.833v4.334C4.111 8.179 4.933 9 5.944 9c1.013 0 1.834-.82 1.834-1.833V2.833C7.778 1.82 6.958 1 5.944 1z"}))}function Q(){return o.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"25",height:"24",viewBox:"0 0 25 24"},o.a.createElement("g",{fill:"none",fillRule:"evenodd"},o.a.createElement("path",{fill:"#707578",d:"M11.889 6.667c.276 0 .5.224.5.5 0 3.114-2.396 5.67-5.445 5.923v2.632c0 .276-.223.5-.5.5-.245 0-.45-.177-.491-.41l-.009-.09V13.09c-1.116-.093-2.145-.494-3-1.119l.717-.717c.793.54 1.751.857 2.783.857 2.731 0 4.945-2.214 4.945-4.944 0-.276.224-.5.5-.5zM1 6.667c.276 0 .5.224.5.5 0 .975.282 1.884.77 2.65l-.722.721C.888 9.58.5 8.418.5 7.167c0-.276.224-.5.5-.5zm8.277-1.031v1.53C9.278 8.732 8.01 10 6.445 10c-.446 0-.868-.103-1.243-.287l.776-.773c.149.039.306.06.467.06.963 0 1.751-.74 1.828-1.683l.006-.15v-.531l1-1zM6.444 0C8.01 0 9.278 1.268 9.278 2.833l-.002-.025-.999.999v-.974c0-.962-.74-1.75-1.682-1.827L6.445 1c-.962 0-1.751.74-1.828 1.683l-.006.15v4.334c0 .097.008.192.022.285l-.804.805c-.112-.269-.184-.558-.209-.86l-.009-.23V2.833C3.611 1.268 4.88 0 6.444 0z",transform:"translate(6.5 4)"}),o.a.createElement("path",{fill:"red",d:"M12.146.646c.196-.195.512-.195.708 0 .173.174.192.443.057.638l-.057.07-12 12c-.196.195-.512.195-.708 0-.173-.174-.192-.443-.057-.638l.057-.07 12-12z",transform:"translate(6.5 4)"})))}function K(e){const[t,n]=function(){const{localTracks:e}=Object(m.a)(),t=e.find(e=>"audio"===e.kind);return[y(t),Object(r.useCallback)(()=>{t&&(t.isEnabled?t.disable():t.enable())},[t])]}(),{localTracks:a}=Object(m.a)(),i=a.some(e=>"audio"===e.kind);return o.a.createElement(l.a,{className:e.className,onClick:n,disabled:!i||e.disabled,startIcon:t?o.a.createElement($,null):o.a.createElement(Q,null),"data-cy-audio-toggle":!0},i?t?"Mute":"Unmute":"No Audio")}function Z(){return o.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},o.a.createElement("g",{fill:"none",fillRule:"evenodd"},o.a.createElement("path",{fill:"#707578",d:"M10.503.85c.32 0 .611.125.827.329l-.696.697c-.025-.018-.053-.032-.084-.038l-.047-.006H1.207c-.102 0-.19.071-.216.165l-.008.059v7.866c0 .101.07.189.165.215l.059.008h1.156l-.983.983h-.173c-.624 0-1.139-.476-1.2-1.083L0 9.922V2.056C0 1.433.476.917 1.084.856l.123-.007h9.296zm5.49 1.124l.007.082v7.866c0 .337-.328.566-.635.47l-.076-.03-3.58-1.79v1.35c0 .623-.476 1.138-1.083 1.2l-.123.006H4.16l.984-.983h5.359c.101 0 .189-.07.215-.164l.008-.06V4.564l.983-.982.353-.353 3.227-1.612c.301-.15.652.04.704.358zm-.977.876L11.71 4.504v2.967l3.307 1.654V2.85z",transform:"translate(4 6)"}),o.a.createElement("path",{fill:"red",fillRule:"nonzero",d:"M13.06.144c.192-.192.503-.192.695 0 .171.17.19.436.057.627l-.057.068-12.29 12.29c-.192.193-.503.193-.695 0-.171-.17-.19-.435-.057-.626l.057-.069L13.06.144z",transform:"translate(4 6)"})))}function J(){return o.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"25",height:"24",viewBox:"0 0 25 24"},o.a.createElement("path",{fill:"#707578",fillRule:"evenodd",d:"M15.003 7c.665 0 1.206.542 1.206 1.207v1.349l3.58-1.789c.301-.15.652.04.704.358l.007.082v7.866c0 .365-.385.603-.711.44l-3.58-1.79v1.35c0 .623-.476 1.138-1.083 1.2l-.123.006H5.707c-.665 0-1.207-.542-1.207-1.206V8.207C4.5 7.542 5.042 7 5.707 7zm0 .983H5.707c-.122 0-.224.102-.224.224v7.866c0 .121.102.223.224.223h9.296c.122 0 .223-.102.223-.223V8.207c0-.122-.101-.224-.223-.224zm4.513 1.019l-3.307 1.654v2.968l3.307 1.653V9.002z"}))}var X=n(20);function ee(e){const[t,n]=Object(X.a)(),a=Object(r.useRef)(0),i=Object(v.d)(),c=Object(r.useCallback)(()=>{Date.now()-a.current>500&&(a.current=Date.now(),n())},[n]);return o.a.createElement(l.a,{className:e.className,onClick:c,disabled:!i||e.disabled,startIcon:t?o.a.createElement(J,null):o.a.createElement(Z,null)},i?t?"Stop Video":"Start Video":"No Video")}function te(){return o.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},o.a.createElement("path",{fill:"#707578",fillRule:"evenodd",d:"M17.657 6.343c3.124 3.124 3.124 8.19 0 11.314-3.124 3.124-8.19 3.124-11.314 0-3.124-3.124-3.124-8.19 0-11.314 3.124-3.124 8.19-3.124 11.314 0zm-10.444.87c-2.643 2.644-2.643 6.93 0 9.574 2.644 2.643 6.93 2.643 9.574 0 2.57-2.57 2.641-6.693.214-9.35l-.214-.224L16.563 7c-2.657-2.427-6.78-2.356-9.35.214zm4.865.484l.02.003.026.005.041.01c.025.007.045.014.063.021l.043.019c.018.009.036.019.053.03.01.005.02.012.03.02.027.019.053.04.077.063l2.773 2.774c.24.24.24.63 0 .87-.213.214-.545.237-.785.071l-.085-.07-1.719-1.72v5.9c0 .34-.275.615-.615.615-.302 0-.553-.218-.605-.505l-.01-.11-.001-5.9-1.718 1.72c-.24.24-.63.24-.87 0-.214-.215-.238-.546-.072-.786l.072-.085 2.769-2.77.015-.014c.02-.018.04-.035.062-.05l.005-.004.008-.006c.027-.018.055-.034.085-.048l.034-.015.059-.02.032-.008c.021-.005.044-.008.068-.011l.038-.003H12.025l.027.002.026.002z"}))}var ne=n(28),ae=n.n(ne);function re(){const{room:e}=Object(m.a)(),[t,n]=Object(r.useState)();return Object(r.useEffect)(()=>{if("connected"===e.state){const t=()=>{n(Array.from(e.participants.values()).concat(e.localParticipant).find(e=>Array.from(e.tracks.values()).find(e=>e.trackName.includes("screen"))))};return t(),e.on("trackPublished",t),e.on("trackUnpublished",t),e.on("participantDisconnected",t),e.localParticipant.on("trackPublished",t),e.localParticipant.on("trackUnpublished",t),()=>{e.off("trackPublished",t),e.off("trackUnpublished",t),e.off("participantDisconnected",t),e.localParticipant.off("trackPublished",t),e.localParticipant.off("trackUnpublished",t)}}},[e]),t}const oe=Object(i.makeStyles)(e=>Object(i.createStyles)({button:{margin:e.spacing(1),"&[disabled]":{color:"#bbb","& svg *":{fill:"#bbb"}}}}));function ie(e){const t=oe(),n=re(),{toggleScreenShare:a}=Object(m.a)(),r=Boolean(n),i=navigator.mediaDevices&&navigator.mediaDevices.getDisplayMedia,c=e.disabled||r||!i;let s="";return r&&(s="Cannot share screen when another user is sharing"),i||(s="Screen sharing is not supported with this browser"),o.a.createElement(ae.a,{title:s,placement:"top",PopperProps:{disablePortal:!0},style:{cursor:c?"not-allowed":"pointer"}},o.a.createElement("span",null,o.a.createElement(l.a,{className:t.button,onClick:a,disabled:c,startIcon:o.a.createElement(te,null),"data-cy-share-screen":!0},"Share Screen")))}const ce=Object(i.makeStyles)(e=>Object(i.createStyles)({container:{backgroundColor:e.palette.background.default,bottom:0,left:0,right:0,height:e.footerHeight+"px",position:"fixed",display:"flex",padding:"0 1.43em",zIndex:10,[e.breakpoints.down("sm")]:{height:e.mobileFooterHeight+"px",padding:0}},screenShareBanner:{position:"fixed",zIndex:10,bottom:e.footerHeight+"px",left:0,right:0,height:"104px",background:"rgba(0, 0, 0, 0.5)","& h6":{color:"white"},"& button":{background:"white",color:e.brand,border:"2px solid "+e.brand,margin:"0 2em","&:hover":{color:"#600101",border:"2px solid #600101",background:"#FFE9E7"}}},hideMobile:{display:"initial",[e.breakpoints.down("sm")]:{display:"none"}}}));function le(){const e=ce(),{isSharingScreen:t,toggleScreenShare:n}=Object(m.a)(),a="reconnecting"===Y(),{room:r}=Object(m.a)();return o.a.createElement(o.a.Fragment,null,t&&o.a.createElement(d.Grid,{container:!0,justify:"center",alignItems:"center",className:e.screenShareBanner},o.a.createElement(d.Typography,{variant:"h6"},"You are sharing your screen"),o.a.createElement(l.a,{onClick:()=>n()},"Stop Sharing")),o.a.createElement("footer",{className:e.container},o.a.createElement(d.Grid,{container:!0,justify:"space-around",alignItems:"center"},o.a.createElement(d.Hidden,{smDown:!0},o.a.createElement(d.Grid,{style:{flex:1}},o.a.createElement(d.Typography,{variant:"body1"},r.name))),o.a.createElement(d.Grid,{item:!0},o.a.createElement(d.Grid,{container:!0,justify:"center"},o.a.createElement(K,{disabled:a}),o.a.createElement(ee,{disabled:a}),o.a.createElement(d.Hidden,{smDown:!0},!t&&o.a.createElement(ie,{disabled:a})),o.a.createElement(E,null))),o.a.createElement(d.Hidden,{smDown:!0},o.a.createElement(d.Grid,{style:{flex:1}},o.a.createElement(d.Grid,{container:!0,justify:"flex-end"},o.a.createElement(U,null),o.a.createElement(f,null)))))))}const se=Object(d.makeStyles)(e=>({container:{background:"white",paddingLeft:"1em",display:"none",height:e.mobileTopBarHeight+"px",[e.breakpoints.down("sm")]:{display:"flex"}},endCallButton:{height:"28px",fontSize:"0.85rem",padding:"0 0.6em"},settingsButton:{[e.breakpoints.down("sm")]:{height:"28px",minWidth:"28px",border:"1px solid rgb(136, 140, 142)",padding:0,margin:"0 1em"}}}));function ue(){const e=se(),{room:t}=Object(m.a)();return o.a.createElement(d.Grid,{container:!0,alignItems:"center",justify:"space-between",className:e.container},o.a.createElement(d.Typography,{variant:"subtitle1"},t.name),o.a.createElement("div",null,o.a.createElement(f,{className:e.endCallButton}),o.a.createElement(U,{buttonClassName:e.settingsButton})))}function de(){return o.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"73",height:"73",viewBox:"0 0 73 73"},o.a.createElement("g",{fill:"none",fillRule:"evenodd"},o.a.createElement("circle",{cx:"36.5",cy:"36.5",r:"36.5",fill:"#FFF"}),o.a.createElement("path",{fill:"#282A2B",strokeLinejoin:"round",d:"M30.973 23.925c-3.162 3.794-3.162 9.886 0 13.68l.262.301c.266.293.548.564.842.812l.192.154v2.95l-6.71 2.397-.213.082c-2.03.834-3.346 2.793-3.346 4.97v2.766c0 .532.431.963.963.963h27.874c.531 0 .962-.431.962-.963V49.27l-.005-.228-.015-.233c-.187-2.092-1.562-3.883-3.539-4.59l-6.71-2.397v-2.95l.192-.154c.393-.33.762-.702 1.104-1.112 3.162-3.795 3.162-9.887 0-13.681-3.25-3.9-8.603-3.9-11.853 0zm10.374 1.232c2.567 3.08 2.567 8.135 0 11.216-.404.484-.85.894-1.328 1.226-.26.18-.414.476-.414.791v4.111c0 .407.255.77.639.907l7.348 2.625c1.314.47 2.213 1.687 2.278 3.077l.004.183v1.781h-25.95l.002-1.804c0-1.394.843-2.65 2.131-3.18l.172-.065 7.327-2.617c.383-.137.639-.5.639-.907v-4.11c0-.316-.155-.612-.415-.792-.478-.332-.924-.742-1.328-1.226-2.567-3.08-2.567-8.135 0-11.216 2.427-2.912 6.248-2.974 8.735-.186l.16.186z"})))}function me(){const{localTracks:e}=Object(m.a)(),t=e.find(e=>"audio"===e.kind);return o.a.createElement(S,{audioTrack:t})}const pe=Object(d.makeStyles)(e=>({container:{position:"relative",height:0,overflow:"hidden",paddingTop:"56.25%",background:"black"},innerContainer:{position:"absolute",top:0,left:0,width:"100%",height:"100%"},identityContainer:{position:"absolute",bottom:0,zIndex:1},identity:{background:"rgba(0, 0, 0, 0.5)",color:"white",padding:"0.18em 0.3em",margin:0,display:"flex",alignItems:"center"},avatarContainer:{display:"flex",alignItems:"center",justifyContent:"center",background:"black",position:"absolute",top:0,right:0,bottom:0,left:0,zIndex:1,[e.breakpoints.down("sm")]:{"& svg":{transform:"scale(0.7)"}}}}));function fe({identity:e}){const t=pe(),{localTracks:n}=Object(m.a)(),a=n.find(e=>e.name.includes("camera"));return o.a.createElement("div",{className:t.container},o.a.createElement("div",{className:t.innerContainer},a?o.a.createElement(L,{track:a,isLocal:!0}):o.a.createElement("div",{className:t.avatarContainer},o.a.createElement(de,null))),o.a.createElement("div",{className:t.identityContainer},o.a.createElement("span",{className:t.identity},o.a.createElement(me,null),o.a.createElement(d.Typography,{variant:"body1",color:"inherit",component:"span"},e))))}var he=n(5);const be=[{label:"Low (160 x 90)",value:"low",resolution:{width:160,height:90}},{label:"CIF (352 x 288)",value:"cif",resolution:{width:352,height:288}},{label:"VGA (640 x 480)",value:"vga",resolution:{width:640,height:480}},{label:"WVGA (800 x 480)",value:"wvga",resolution:{width:800,height:480}},{label:"HD 540P (960 x 540)",value:"540p",resolution:{width:960,height:540}},{label:"HD 720P (1280 x 720)",value:"720p",resolution:{width:1280,height:720}},{label:"HD 960P (1280 x 960)",value:"960p",resolution:{width:1280,height:960}},{label:"HD Standard 1080P (1440 x 1080)",value:"standard1080p",resolution:{width:1440,height:1080}},{label:"HD Widescreen 1080P (1920 x 1080)",value:"wide1080p",resolution:{width:1920,height:1080}},{label:"Server Default",value:"default",resolution:void 0}];function ge(e){var t;if(void 0!==e)return null===(t=be.find(t=>t.value===e))||void 0===t?void 0:t.resolution}const ve=Object(i.makeStyles)(e=>({container:{width:"600px",minHeight:"400px",[e.breakpoints.down("xs")]:{width:"calc(100vw - 32px)"},"& .inputSelect":{width:"calc(100% - 35px)"}},button:{float:"right"},paper:{[e.breakpoints.down("xs")]:{margin:"16px"}},formControl:{display:"block",margin:"1.5em 0","&:first-child":{margin:"0 0 1.5em 0"}},label:{width:"133%"}})),Ee=e=>void 0===e?"default":e,we=be.map(({label:e,value:t})=>o.a.createElement(d.MenuItem,{value:t,key:t},e));function ke({open:e,onClose:t}){const n=ve(),{settings:i,dispatchSetting:c}=Object(a.b)(),l="disconnected"!==Y(),s=Object(r.useCallback)(e=>{c({name:e.target.name,value:e.target.value})},[c]),u=Object(r.useCallback)(e=>{/[^\d]/.test(e.target.value)||s(e)},[s]);return o.a.createElement(d.Dialog,{open:e,onClose:t,classes:{paper:n.paper}},o.a.createElement(d.DialogTitle,null,"Connection Settings"),o.a.createElement(d.Divider,null),o.a.createElement(d.DialogContent,{className:n.container},o.a.createElement(d.Grid,{container:!0,spacing:2},o.a.createElement(d.Grid,{item:!0,xs:12},o.a.createElement(d.Typography,{hidden:!l,variant:"body2"},"These settings cannot be changed when connected to a room.")),o.a.createElement(d.Grid,{item:!0,sm:6,xs:12},o.a.createElement(d.FormControl,{className:n.formControl},o.a.createElement(d.InputLabel,{id:he.b.dominantSpeakerPriority},"Dominant Speaker Priority:"),o.a.createElement(d.Select,{fullWidth:!0,disabled:l,name:he.b.dominantSpeakerPriority,label:he.b.dominantSpeakerPriority,value:Ee(i.dominantSpeakerPriority),onChange:s},o.a.createElement(d.MenuItem,{value:"low"},"Low"),o.a.createElement(d.MenuItem,{value:"standard"},"Standard"),o.a.createElement(d.MenuItem,{value:"high"},"High"),o.a.createElement(d.MenuItem,{value:"default"},"Server Default"))),o.a.createElement(d.FormControl,{className:n.formControl},o.a.createElement(d.InputLabel,{id:he.b.trackSwitchOffMode},"Track Switch Off Mode:"),o.a.createElement(d.Select,{fullWidth:!0,disabled:l,name:he.b.trackSwitchOffMode,label:he.b.trackSwitchOffMode,value:Ee(i.trackSwitchOffMode),onChange:s},o.a.createElement(d.MenuItem,{value:"predicted"},"Predicted"),o.a.createElement(d.MenuItem,{value:"detected"},"Detected"),o.a.createElement(d.MenuItem,{value:"disabled"},"Disabled"),o.a.createElement(d.MenuItem,{value:"default"},"Server Default"))),o.a.createElement(d.FormControl,{className:n.formControl},o.a.createElement(d.InputLabel,{id:he.b.bandwidthProfileMode},"Mode:"),o.a.createElement(d.Select,{fullWidth:!0,disabled:l,name:he.b.bandwidthProfileMode,label:he.b.bandwidthProfileMode,value:Ee(i.bandwidthProfileMode),onChange:s},o.a.createElement(d.MenuItem,{value:"grid"},"Grid"),o.a.createElement(d.MenuItem,{value:"collaboration"},"Collaboration"),o.a.createElement(d.MenuItem,{value:"presentation"},"Presentation"),o.a.createElement(d.MenuItem,{value:"default"},"Server Default"))),o.a.createElement(d.FormControl,{className:n.formControl},o.a.createElement(d.TextField,{disabled:l,fullWidth:!0,id:he.b.maxTracks,label:"Max Tracks",placeholder:"Leave blank for no limit",name:he.b.maxTracks,value:Ee(i.maxTracks),onChange:u})),o.a.createElement(d.FormControl,{className:n.formControl},o.a.createElement(d.TextField,{disabled:l,fullWidth:!0,id:he.b.maxAudioBitrate,label:"Max Audio Bitrate",placeholder:"Leave blank for no limit",name:he.b.maxAudioBitrate,value:Ee(i.maxAudioBitrate),onChange:u}))),o.a.createElement(d.Grid,{item:!0,sm:6,xs:12},o.a.createElement(d.FormControl,{fullWidth:!0,className:n.formControl},o.a.createElement(d.InputLabel,{id:he.b.renderDimensionLow,className:n.label},"Render Dimension (Low Priority):"),o.a.createElement(d.Select,{fullWidth:!0,disabled:l,name:he.b.renderDimensionLow,label:he.b.renderDimensionLow,value:Ee(i.renderDimensionLow),onChange:s},we)),o.a.createElement(d.FormControl,{fullWidth:!0,className:n.formControl},o.a.createElement(d.InputLabel,{id:he.b.renderDimensionStandard,className:n.label},"Render Dimension (Standard Priority):"),o.a.createElement(d.Select,{fullWidth:!0,disabled:l,name:he.b.renderDimensionStandard,label:he.b.renderDimensionStandard,value:Ee(i.renderDimensionStandard),onChange:s},we)),o.a.createElement(d.FormControl,{fullWidth:!0,className:n.formControl},o.a.createElement(d.InputLabel,{id:he.b.renderDimensionHigh,className:n.label},"Render Dimension (High Priority):"),o.a.createElement(d.Select,{fullWidth:!0,disabled:l,name:he.b.renderDimensionHigh,label:he.b.renderDimensionHigh,value:Ee(i.renderDimensionHigh),onChange:s},we))))),o.a.createElement(d.Divider,null),o.a.createElement(d.DialogActions,null,o.a.createElement(d.Button,{className:n.button,color:"primary",variant:"contained",onClick:t},"Done")))}function ye(){return o.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},o.a.createElement("g",{fill:"none",fillRule:"evenodd",strokeLinecap:"round",strokeLinejoin:"round"},o.a.createElement("g",{fill:"#707578"},o.a.createElement("path",{d:"M10 .833c.276 0 .5.224.5.5l-.001 1.775.16.042c.423.113.775.226 1.072.35l.121.054 1.273-1.272c.173-.173.442-.192.637-.057l.07.057 1.886 1.886c.195.196.195.512 0 .708l-1.273 1.27.055.123c.125.297.238.65.351 1.073l.041.158h1.775c.245 0 .45.177.492.41l.008.09v2c0 .276-.224.5-.5.5H14.89l-.03.118c-.115.431-.231.798-.358 1.103l-.058.131 1.273 1.273c.173.174.192.443.057.638l-.057.07-1.886 1.885c-.195.195-.511.195-.707 0l-1.273-1.272-.12.053c-.296.125-.648.238-1.071.352l-.162.041.001 1.775c0 .245-.177.45-.41.492l-.09.008H8c-.276 0-.5-.224-.5-.5l-.001-1.775-.161-.042c-.425-.114-.776-.227-1.072-.351l-.12-.054-1.271 1.272c-.174.174-.443.193-.638.058l-.07-.057-1.885-1.886c-.195-.195-.196-.512 0-.707l1.272-1.273-.053-.12c-.125-.296-.238-.648-.352-1.071l-.042-.161H1.333c-.245 0-.45-.177-.492-.41L.833 10V8c0-.276.224-.5.5-.5h1.774l.042-.16c.114-.424.227-.776.352-1.072l.052-.121-1.271-1.271c-.174-.174-.193-.443-.058-.638l.058-.07 1.886-1.886c.195-.195.512-.195.707 0l1.272 1.272.121-.053c.297-.125.65-.238 1.073-.351l.158-.042.001-1.775c0-.245.177-.45.41-.492L8 .833zm-.501 1h-1L8.5 3.499c0 .202-.121.38-.302.459l-.08.027c-.857.206-1.458.397-1.805.608-.197.12-.45.09-.614-.073L4.521 3.342 3.342 4.521 4.52 5.699c.14.14.182.347.116.527l-.043.087c-.211.347-.402.947-.61 1.805-.054.224-.255.382-.486.382H1.833v1h1.664c.202 0 .381.121.46.301l.026.081c.208.858.399 1.458.61 1.805.12.197.09.45-.073.614l-1.178 1.177 1.178 1.179 1.178-1.178c.14-.14.347-.182.528-.115l.087.042c.277.17.714.325 1.32.487l.485.124c.224.054.382.255.382.486l-.001 1.663h1l.001-1.663c0-.202.121-.381.301-.46l.081-.026c.858-.208 1.458-.399 1.804-.61.197-.12.45-.09.614.073l1.178 1.177 1.179-1.179-1.177-1.177c-.14-.14-.182-.347-.116-.527l.043-.087c.189-.31.37-.852.554-1.577l.056-.23c.055-.223.256-.38.486-.38h1.663v-1h-1.664c-.202 0-.381-.121-.46-.302l-.026-.08c-.206-.854-.398-1.458-.61-1.806-.12-.197-.09-.45.074-.614l1.176-1.177-1.178-1.178L12.3 4.52c-.14.14-.346.182-.526.116l-.088-.043c-.277-.169-.717-.325-1.32-.486l-.483-.122C9.658 3.93 9.5 3.73 9.5 3.499l-.001-1.666zm1.976 4.692c1.367 1.367 1.367 3.583 0 4.95s-3.583 1.367-4.95 0-1.367-3.583 0-4.95 3.583-1.367 4.95 0zm-4.243.707c-.976.977-.976 2.56 0 3.536.977.976 2.56.976 3.536 0 .934-.934.974-2.423.122-3.405l-.122-.13-.13-.123c-.983-.852-2.472-.812-3.406.122z",transform:"translate(-636 -585) translate(276 301) translate(360 284) translate(3 3)"}))))}const Ce=Object(d.makeStyles)(e=>({settingsButton:{margin:"1.8em 0 0"}}));function xe({mobileButtonClass:e}){const t=Ce(),{roomType:n}=Object(a.b)(),i=Object(d.useMediaQuery)(e=>e.breakpoints.down("sm")),[c,s]=Object(r.useState)(!1),[u,m]=Object(r.useState)(!1),[p,f]=Object(r.useState)(!1),[h,b]=Object(r.useState)(!1),g=Object(r.useRef)(null);return o.a.createElement(o.a.Fragment,null,i?o.a.createElement(l.a,{ref:g,onClick:()=>s(!0),startIcon:o.a.createElement(q.a,null),className:e},"More"):o.a.createElement(l.a,{ref:g,onClick:()=>s(!0),startIcon:o.a.createElement(ye,null),className:t.settingsButton},"Settings"),o.a.createElement(F.a,{open:c,onClose:()=>s(e=>!e),anchorEl:g.current,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:i?"left":"right"},transformOrigin:{vertical:i?-55:-45,horizontal:"center"}},o.a.createElement(H.a,{onClick:()=>m(!0)},o.a.createElement(W.a,{variant:"body1"},"About")),o.a.createElement(H.a,{onClick:()=>f(!0)},o.a.createElement(W.a,{variant:"body1"},"Audio and Video Settings")),"peer-to-peer"!==n&&"go"!==n&&o.a.createElement(H.a,{onClick:()=>b(!0)},o.a.createElement(W.a,{variant:"body1"},"Connection Settings"))),o.a.createElement(w.a,{open:u,onClose:()=>{m(!1),s(!1)}}),o.a.createElement(B,{open:p,onClose:()=>{f(!1),s(!1)}}),o.a.createElement(ke,{open:h,onClose:()=>{b(!1),s(!1)}}))}const Oe=Object(d.makeStyles)(e=>({gutterBottom:{marginBottom:"1em"},marginTop:{marginTop:"1em"},deviceButton:{width:"100%",border:"2px solid #aaa",margin:"1em 0"},localPreviewContainer:{paddingRight:"2em",[e.breakpoints.down("sm")]:{padding:"0 2.5em"}},joinButtons:{display:"flex",justifyContent:"space-between",[e.breakpoints.down("sm")]:{flexDirection:"column-reverse",width:"100%","& button":{margin:"0.5em 0"}}},mobileButtonBar:{[e.breakpoints.down("sm")]:{display:"flex",justifyContent:"space-between",margin:"1.5em 0 1em"}},mobileButton:{padding:"0.8em 0",margin:0}}));function je({name:e,roomName:t,setStep:n}){const r=Oe(),{getToken:i,isFetching:c}=Object(a.b)(),{connect:l,isAcquiringLocalTracks:s,isConnecting:u}=Object(m.a)(),p=c||s||u;return o.a.createElement(o.a.Fragment,null,o.a.createElement(d.Typography,{variant:"h5",className:r.gutterBottom},"Join ",t),o.a.createElement(d.Grid,{container:!0,justify:"center"},o.a.createElement(d.Grid,{item:!0,md:7,sm:12,xs:12},o.a.createElement("div",{className:r.localPreviewContainer},o.a.createElement(fe,{identity:e})),o.a.createElement("div",{className:r.mobileButtonBar},o.a.createElement(d.Hidden,{mdUp:!0},o.a.createElement(K,{className:r.mobileButton,disabled:p}),o.a.createElement(ee,{className:r.mobileButton,disabled:p})),o.a.createElement(xe,{mobileButtonClass:r.mobileButton}))),o.a.createElement(d.Grid,{item:!0,md:5,sm:12,xs:12},o.a.createElement(d.Grid,{container:!0,direction:"column",justify:"space-between",style:{height:"100%"}},o.a.createElement("div",null,o.a.createElement(d.Hidden,{smDown:!0},o.a.createElement(K,{className:r.deviceButton,disabled:p}),o.a.createElement(ee,{className:r.deviceButton,disabled:p}))),o.a.createElement("div",{className:r.joinButtons},o.a.createElement(d.Button,{variant:"outlined",color:"primary",onClick:()=>n(rt.roomNameStep)},"Cancel"),o.a.createElement(d.Button,{variant:"contained",color:"primary","data-cy-join-now":!0,onClick:()=>{i(e,t).then(e=>l(e))},disabled:p},"Join Now"))))))}function Se(){return o.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"96",height:"96",viewBox:"0 0 96 96"},o.a.createElement("g",{fill:"none",fillRule:"evenodd"},o.a.createElement("path",{fill:"#FFF",d:"M43.86 0h8.28c11.661 0 18.564 1.74 24.675 5.01 6.112 3.267 10.908 8.063 14.175 14.175C94.26 25.295 96 32.197 96 43.86v8.28c0 11.661-1.74 18.564-5.01 24.675-3.267 6.112-8.063 10.908-14.175 14.175C70.704 94.26 63.801 96 52.14 96h-8.28c-11.661 0-18.564-1.74-24.675-5.01-6.112-3.267-10.908-8.063-14.175-14.175C1.74 70.705 0 63.803 0 52.14v-8.28c0-11.661 1.74-18.564 5.01-24.675C8.277 13.073 13.073 8.277 19.185 5.01 25.295 1.74 32.197 0 43.86 0z"}),o.a.createElement("path",{fill:"#F22F46",d:"M53.25 63h-25.5C25.679 63 24 61.321 24 59.25v-22.5c0-2.071 1.679-3.75 3.75-3.75h25.5c2.071 0 3.75 1.679 3.75 3.75v5.82l9.57-4.785c1.164-.583 2.546-.521 3.653.164 1.107.685 1.78 1.894 1.777 3.196V54.87c.008 1.3-.66 2.512-1.766 3.198-1.105.686-2.487.747-3.65.162L57 53.49v5.76C57 61.321 55.32 63 53.25 63zm-25.5-27c-.414 0-.75.336-.75.75v22.5c0 .414.336.75.75.75h25.5c.414 0 .75-.336.75-.75v-8.175c-.001-.518.266-1 .705-1.275.44-.275.99-.303 1.455-.075L67.92 55.5c.224.123.496.123.72 0 .22-.141.356-.383.36-.645v-13.71c-.004-.262-.14-.504-.36-.645-.224-.123-.496-.123-.72 0l-11.745 5.865c-.47.236-1.028.21-1.473-.069-.445-.28-.711-.77-.702-1.296v-8.25c0-.414-.336-.75-.75-.75h-25.5z"})))}function Te(e){return o.a.createElement("svg",Object.assign({fill:"#F22F46",xmlns:"http://www.w3.org/2000/svg",width:"30",height:"30",viewBox:"0 0 30 30"},e),o.a.createElement("path",{d:"M15 0C6.7 0 0 6.7 0 15s6.7 15 15 15 15-6.7 15-15S23.3 0 15 0zm0 26C8.9 26 4 21.1 4 15S8.9 4 15 4s11 4.9 11 11-4.9 11-11 11zm6.8-14.7c0 1.7-1.4 3.1-3.1 3.1s-3.1-1.4-3.1-3.1 1.4-3.1 3.1-3.1 3.1 1.4 3.1 3.1zm0 7.4c0 1.7-1.4 3.1-3.1 3.1s-3.1-1.4-3.1-3.1c0-1.7 1.4-3.1 3.1-3.1s3.1 1.4 3.1 3.1zm-7.4 0c0 1.7-1.4 3.1-3.1 3.1s-3.1-1.4-3.1-3.1c0-1.7 1.4-3.1 3.1-3.1s3.1 1.4 3.1 3.1zm0-7.4c0 1.7-1.4 3.1-3.1 3.1S8.2 13 8.2 11.3s1.4-3.1 3.1-3.1 3.1 1.4 3.1 3.1z"}))}var Ne=n(40),Pe=n(16);const Le=Object(d.makeStyles)(e=>({background:{display:"flex",alignItems:"center",justifyContent:"center",background:"rgb(40, 42, 43)",height:"100%"},container:{position:"relative",flex:"1"},innerContainer:{display:"flex",width:"888px",height:"379px",borderRadius:"8px",boxShadow:"0px 2px 4px 0px rgba(40, 42, 43, 0.3)",overflow:"hidden",position:"relative",margin:"auto",[e.breakpoints.down("sm")]:{display:"block",height:"auto",width:"calc(100% - 40px)",margin:"auto",maxWidth:"400px"}},swooshContainer:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center",backgroundImage:"url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='296' height='378' viewBox='0 0 296 378'%3E%3Cdefs%3E%3ClinearGradient id='utbttnlrpc' x1='78.976%25' x2='63.882%25' y1='60.873%25' y2='45.554%25'%3E%3Cstop offset='0%25' stop-opacity='0'/%3E%3Cstop offset='100%25'/%3E%3C/linearGradient%3E%3ClinearGradient id='aim8r3oczd' x1='78.976%25' x2='63.882%25' y1='56.106%25' y2='47.503%25'%3E%3Cstop offset='0%25' stop-opacity='0'/%3E%3Cstop offset='100%25'/%3E%3C/linearGradient%3E%3Cpath id='5tk4i6f80a' d='M0 0H296V378H0z'/%3E%3C/defs%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cmask id='m1ihwluuxb' fill='%23fff'%3E%3Cuse xlink:href='%235tk4i6f80a'/%3E%3C/mask%3E%3Cuse fill='%23DE5858' xlink:href='%235tk4i6f80a'/%3E%3Cg mask='url(%23m1ihwluuxb)'%3E%3Cg%3E%3Cpath fill='url(%23utbttnlrpc)' d='M0 286.83c87.695-83.937 175.802-132.682 264.323-146.233 132.78-20.328 183.24 4.255 225.143-23.414 73.409-48.471 93.039-15.154 148.326-20.892 44.84-4.654 98.48-77.401 135.81-91.717C795.596-3.86 821.469.801 851.22 18.56L891 476.5H0V286.83z' opacity='.06' transform='translate(-457 -22.5)'/%3E%3Cpath fill='url(%23aim8r3oczd)' d='M137 604.5c63.759-109.686 155.8-165.124 276.126-166.315 180.488-1.786 157.888-146.686 387.11-146.33 229.223.356 170.665-151.786 341.36-166.888 113.797-10.068 180.265 10.685 199.404 62.26V604.5H137z' opacity='.08' transform='translate(-457 -22.5)'/%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/svg%3E%0A\");",backgroundSize:"cover",width:"296px",[e.breakpoints.down("sm")]:{width:"100%",height:"100px",backgroundPositionY:"140px"}},logoContainer:{position:"absolute",width:"210px",textAlign:"center",[e.breakpoints.down("sm")]:{display:"flex",alignItems:"center",width:"90%",textAlign:"initial","& svg":{height:"64px"}}},twilioLogo:{position:"absolute",top:0,left:0,margin:"20px"},content:{background:"white",width:"100%",padding:"4em",flex:1,[e.breakpoints.down("sm")]:{padding:"2em"}},title:{color:"white",margin:"1em 0 0",[e.breakpoints.down("sm")]:{margin:0,fontSize:"1.1rem"}},subContentContainer:{position:"absolute",marginTop:"1em",width:"100%"}}));var Ae=e=>{const t=Le(),{user:n}=Object(a.b)(),r=Object(Pe.useLocation)();return o.a.createElement("div",{className:t.background},o.a.createElement(Te,{className:t.twilioLogo}),n&&"/login"!==r.pathname&&o.a.createElement(Ne.a,null),o.a.createElement("div",{className:t.container},o.a.createElement("div",{className:t.innerContainer},o.a.createElement("div",{className:t.swooshContainer},o.a.createElement("div",{className:t.logoContainer},o.a.createElement(Se,null),o.a.createElement(d.Typography,{variant:"h6",className:t.title},"Twilio Programmable Video"))),o.a.createElement("div",{className:t.content},e.children)),e.subContent&&o.a.createElement("div",{className:t.subContentContainer},e.subContent)))},Ie=n(44),De=n.n(Ie);function Be(){return o.a.createElement("svg",{width:"14px",height:"14px",viewBox:"0 0 14 14",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},o.a.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},o.a.createElement("g",{transform:"translate(-299.000000, -723.000000)",fill:"#D61F1F"},o.a.createElement("g",{transform:"translate(276.000000, 704.000000)"},o.a.createElement("g",{transform:"translate(23.000000, 19.000000)"},o.a.createElement("path",{d:"M8.03935839,0.763849674 L13.2361503,5.96064161 C13.8101721,6.5346634 13.8101721,7.4653366 13.2361503,8.03935839 L8.03935839,13.2361503 C7.4653366,13.8101721 6.5346634,13.8101721 5.96064161,13.2361503 L0.763849674,8.03935839 C0.189827887,7.4653366 0.189827887,6.5346634 0.763849674,5.96064161 L5.96064161,0.763849674 C6.5346634,0.189827887 7.4653366,0.189827887 8.03935839,0.763849674 Z M7,8.66666667 C6.53976271,8.66666667 6.16666667,9.03976271 6.16666667,9.5 C6.16666667,9.96023729 6.53976271,10.3333333 7,10.3333333 C7.46023729,10.3333333 7.83333333,9.96023729 7.83333333,9.5 C7.83333333,9.03976271 7.46023729,8.66666667 7,8.66666667 Z M7.00842529,4.5 L6.99145559,4.5 C6.48802096,4.5 6.09771771,4.99363437 6.17690967,5.53663218 L6.53327351,7.40140326 C6.56721292,7.64822044 6.76519283,7.83333333 6.99711216,7.83333333 L7.00276873,7.83333333 C7.23468805,7.83333333 7.43266796,7.64822044 7.46660737,7.40140326 L7.82297121,5.53663218 C7.90216317,4.99363437 7.51751649,4.50617043 7.00842529,4.5 Z",id:"Error"}))))))}var Me=n(45),Re=n.n(Me);function ze(){return o.a.createElement("svg",{width:"16px",height:"14px",viewBox:"0 0 16 14",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},o.a.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},o.a.createElement("g",{transform:"translate(-273.000000, -162.000000)",fill:"#E46216"},o.a.createElement("g",{transform:"translate(251.000000, 143.000000)"},o.a.createElement("g",{transform:"translate(22.000000, 19.000000)"},o.a.createElement("path",{d:"M6.68405227,0.743750848 C7.26590697,-0.247916949 8.73410873,-0.247916949 9.31596344,0.743750848 L9.31596344,0.743750848 L15.7980583,11.7915293 C16.3754418,12.775573 15.6458879,14 14.4821027,14 L14.4821027,14 L1.5178827,14 C0.354135396,14 -0.375441293,12.775573 0.201934693,11.7915293 L0.201934693,11.7915293 Z M8,10 C7.44771525,10 7,10.4477153 7,11 C7,11.5522847 7.44771525,12 8,12 C8.55228475,12 9,11.5522847 9,11 C9,10.4477153 8.55228475,10 8,10 Z M8.01011035,5 L7.98974671,5 L7.87816923,5.00681158 C7.32928042,5.07427655 6.92320065,5.63308608 7.01229161,6.24395862 L7.01229161,6.24395862 L7.43992821,8.48168391 L7.46058982,8.57746523 C7.53403676,8.82448556 7.74990819,9 8.00332247,9 L8.00332247,9 L8.09436762,8.9919759 C8.33199007,8.94972242 8.5237268,8.74495557 8.55992884,8.48168391 L8.55992884,8.48168391 L8.98756545,6.24395862 L8.99896034,6.12268979 C9.02431547,5.52149772 8.58283795,5.00694173 8.01011035,5 L8.01011035,5 Z"}))))))}const Fe=Object(d.makeStyles)(e=>({container:{display:"flex",alignItems:"baseline",justifyContent:"space-between",width:"400px",minHeight:"50px",background:"white",padding:"1em",borderRadius:"3px",boxShadow:"0 12px 24px 4px rgba(40,42,43,0.2)",[e.breakpoints.down("sm")]:{width:"100%"}},contentContainer:{display:"flex"},iconContainer:{display:"flex",padding:"0 1.3em 0 0.3em",transform:"translateY(4px)"},headline:{fontWeight:"bold"},error:{borderLeft:"4px solid #D61F1F"},warning:{borderLeft:"4px solid #E46216"}}));function Ve({headline:e,message:t,variant:n,open:a,handleClose:r}){const i=Fe();return o.a.createElement(Re.a,{anchorOrigin:{vertical:"top",horizontal:"right"},open:a,onClose:(e,t)=>{"clickaway"!==t&&(null==r||r())}},o.a.createElement("div",{className:u()(i.container,{[i.error]:"error"===n,[i.warning]:"warning"===n})},o.a.createElement("div",{className:i.contentContainer},o.a.createElement("div",{className:i.iconContainer},"warning"===n&&o.a.createElement(ze,null),"error"===n&&o.a.createElement(Be,null)),o.a.createElement("div",null,o.a.createElement(d.Typography,{variant:"body1",className:i.headline,component:"span"},e),o.a.createElement(d.Typography,{variant:"body1",component:"span"}," ",t))),o.a.createElement("div",null,r&&o.a.createElement(d.IconButton,{size:"small","aria-label":"close",color:"inherit",onClick:r},o.a.createElement(De.a,{fontSize:"small"})))))}function He({error:e}){const t=Object(v.c)(),n=Object(v.d)(),{isAcquiringLocalTracks:a}=Object(m.a)(),[i,c]=Object(r.useState)(!1),l=!i&&!a&&(Boolean(e)||!t||!n),{headline:s,message:u}=function(e,t,n){let a="",r="";switch(!0){case"NotAllowedError"===(null==n?void 0:n.name):a="Unable to Access Media:",r="Permission denied by system"===n.message?"The operating system has blocked the browser from accessing the microphone or camera. Please check your operating system settings.":"The user has denied permission to use audio and video. Please grant permission to the browser to access the microphone and camera.";break;case"NotFoundError"===(null==n?void 0:n.name):a="Cannot Find Microphone or Camera:",r="The browser cannot access the microphone or camera. Please make sure all input devices are connected and enabled.";break;case Boolean(n):a="Error Acquiring Media:",r=`${n.name} ${n.message}`;break;case!e&&!t:a="No Camera or Microphone Detected:",r="Other participants in the room will be unable to see and hear you.";break;case!t:a="No Camera Detected:",r="Other participants in the room will be unable to see you.";break;case!e:a="No Microphone Detected:",r="Other participants in the room will be unable to hear you."}return{headline:a,message:r}}(t,n,e);return o.a.createElement(Ve,{open:l,handleClose:()=>c(!0),headline:s,message:u,variant:"warning"})}var _e=n(8),qe=n.n(_e);var Ge=n(30);function We(e,t,n){return void 0===e?Ze.Green:e>=n?Ze.Red:e>=t?Ze.Yellow:Ze.Green}const Ue=2*Math.PI*9,Ye=Object(d.makeStyles)(()=>({svg:{transform:"rotate(-90deg)",marginRight:"0.6em",fill:"none"},innerCircle:{stroke:"rgb(200, 204, 207)"},circle:{stroke:"#027AC5",strokeDasharray:Ue,strokeDashoffset:"0px",animation:Ke/1e3+1+"s $progress linear"},"@keyframes progress":{"0%":{strokeDashoffset:Ue+"px"},"100%":{strokeDashoffset:"0px"}}}));function $e(){const e=Ye();return o.a.createElement("svg",{viewBox:"0 0 24 24",width:24,height:24,strokeWidth:"3px",xmlns:"http://www.w3.org/2000/svg",className:e.svg},o.a.createElement("circle",{cx:12,cy:12,r:9,className:e.innerCircle}),o.a.createElement("circle",{cx:12,cy:12,r:9,className:e.circle}))}function Qe(){return o.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"28",height:"28",viewBox:"0 0 28 28"},o.a.createElement("path",{fill:"#00994A",d:"M14 4.667c5.155 0 9.333 4.178 9.333 9.333S19.155 23.333 14 23.333 4.667 19.155 4.667 14 8.845 4.667 14 4.667zm3.496 5.833c-.31 0-.608.123-.827.343l-3.834 3.843-1.504-1.514c-.22-.22-.517-.342-.827-.342-.31 0-.608.123-.828.342-.22.22-.343.517-.343.827 0 .31.124.608.343.827l2.331 2.33c.108.109.237.195.38.254.141.06.294.09.448.09.153 0 .306-.03.448-.09.142-.059.27-.145.379-.255l4.662-4.659c.22-.219.343-.516.343-.826 0-.31-.124-.608-.343-.827-.22-.22-.517-.343-.828-.343z",transform:"translate(-588 -698) translate(588 698)"}))}const Ke=1e4;var Ze;!function(e){e[e.Red=0]="Red",e[e.Yellow=1]="Yellow",e[e.Green=2]="Green"}(Ze||(Ze={}));const Je=Object(d.makeStyles)({iconContainer:{display:"flex",alignItems:"center",marginRight:"0.4em"},result:{color:"white"}});function Xe({children:e,icon:t}){const n=Je();return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:n.iconContainer},t),o.a.createElement(d.Typography,{variant:"subtitle2",className:n.result},e))}function et({networkCondition:e,error:t}){return t?o.a.createElement(Xe,{icon:o.a.createElement(Be,null)},"There was a problem connecting to the network"):e===Ze.Red?o.a.createElement(Xe,{icon:o.a.createElement(Be,null)},"Poor network conditions. You may experience poor call quality and reliability."):e===Ze.Yellow?o.a.createElement(Xe,{icon:o.a.createElement(ze,null)},"Poor network conditions. You may experience degraded video performance."):e===Ze.Green?o.a.createElement(Xe,{icon:o.a.createElement(Qe,null)},"Your network connection is stable"):null}function tt(){const e=Je(),{tokens:t,tokenError:n}=function(){const{getToken:e}=Object(a.b)(),[t,n]=Object(r.useState)(),[o,i]=Object(r.useState)(),[c,l]=Object(r.useState)(!1);return Object(r.useEffect)(()=>{if(!c&&!t){const t="preflight-network-test-"+Object(Ge.nanoid)();l(!0);const a="participant-"+Object(Ge.nanoid)(),r="participant-"+Object(Ge.nanoid)();Promise.all([e(a,t),e(r,t)]).then(e=>{n(e),l(!1)}).catch(e=>i(e))}},[e,c,t]),{tokens:t,tokenError:o}}(),{testFailure:i,testReport:c}=function(e,t){const{isConnecting:n}=Object(m.a)(),[a,o]=Object(r.useState)(),[i,c]=Object(r.useState)(),[l,s]=Object(r.useState)(!1),u=Object(r.useRef)();return Object(r.useEffect)(()=>{var e,t,a;n&&(null===(e=u.current)||void 0===e||e.stop(),null===(t=u.current)||void 0===t||t.removeAllListeners("completed"),null===(a=u.current)||void 0===a||a.removeAllListeners("failed"))},[n]),Object(r.useEffect)(()=>()=>{var e,t,n;null===(e=u.current)||void 0===e||e.stop(),null===(t=u.current)||void 0===t||t.removeAllListeners("completed"),null===(n=u.current)||void 0===n||n.removeAllListeners("failed")},[]),Object(r.useEffect)(()=>{!e||!t||a||i||l||(s(!0),u.current=qe.a.testPreflight(e,t,{duration:Ke}),u.current.on("completed",e=>{o(e),s(!1),console.log("Preflight network test completed. See test report below:"),console.log(e)}).on("failed",e=>{c(e),s(!1),console.log("Preflight network test failed. See error below:"),console.log(e)}))},[e,t,a,i,l]),{testReport:a,testFailure:i,isTestRunning:l}}(null==t?void 0:t[0],null==t?void 0:t[1]),l=function(e){var t;if(!e)return;const n=null===(t=e.stats.rtt)||void 0===t?void 0:t.average,a=e.stats.jitter.average,r=e.stats.packetLoss.average;return Math.min(We(n,200,400),We(a,30,100),We(r,3,7))}(c);return o.a.createElement(d.Grid,{container:!0,justify:"center",alignItems:"center",style:{height:"55px",paddingBottom:"1.5em"}},i||c?o.a.createElement(et,{networkCondition:l,error:n||i}):o.a.createElement(o.a.Fragment,null,o.a.createElement($e,null),o.a.createElement(d.Typography,{variant:"subtitle2",className:e.result},"Checking your network connection")))}const nt=Object(d.makeStyles)(e=>({gutterBottom:{marginBottom:"1em"},inputContainer:{display:"flex",justifyContent:"space-between",margin:"1.5em 0 3.5em","& div:not(:last-child)":{marginRight:"1em"},[e.breakpoints.down("sm")]:{margin:"1.5em 0 2em"}},textFieldContainer:{width:"100%"},continueButton:{[e.breakpoints.down("sm")]:{width:"100%"}}}));function at({name:e,roomName:t,setName:n,setRoomName:r,handleSubmit:i}){const c=nt(),{user:l}=Object(a.b)(),s=!window.location.search.includes("customIdentity=true")&&(null==l?void 0:l.displayName);return o.a.createElement(o.a.Fragment,null,o.a.createElement(d.Typography,{variant:"h5",className:c.gutterBottom},"Join a Room"),o.a.createElement(d.Typography,{variant:"body1"},s?"Enter the name of a room you'd like to join.":"Enter your name and the name of a room you'd like to join"),o.a.createElement("form",{onSubmit:i},o.a.createElement("div",{className:c.inputContainer},!s&&o.a.createElement("div",{className:c.textFieldContainer},o.a.createElement(d.InputLabel,{shrink:!0,htmlFor:"input-user-name"},"Your Name"),o.a.createElement(d.TextField,{id:"input-user-name",variant:"outlined",fullWidth:!0,size:"small",value:e,onChange:e=>{n(e.target.value)}})),o.a.createElement("div",{className:c.textFieldContainer},o.a.createElement(d.InputLabel,{shrink:!0,htmlFor:"input-room-name"},"Room Name"),o.a.createElement(d.TextField,{autoCapitalize:"false",id:"input-room-name",variant:"outlined",fullWidth:!0,size:"small",value:t,onChange:e=>{r(e.target.value)}}))),o.a.createElement(d.Grid,{container:!0,justify:"flex-end"},o.a.createElement(d.Button,{variant:"contained",type:"submit",color:"primary",disabled:!e||!t,className:c.continueButton},"Continue"))))}var rt;function ot({startUserName:e,startRoomName:t}){const{user:n}=Object(a.b)(),{getAudioAndVideoTracks:i}=Object(m.a)(),{URLRoomName:c}=Object(Pe.useParams)(),[l,s]=Object(r.useState)(rt.roomNameStep),[u,d]=Object(r.useState)(e||(null==n?void 0:n.displayName)||""),[p,f]=Object(r.useState)(t||""),[h,b]=Object(r.useState)();Object(r.useEffect)(()=>{c&&(f(c),(null==n?void 0:n.displayName)&&s(rt.deviceSelectionStep))},[n,c]),Object(r.useEffect)(()=>{l===rt.deviceSelectionStep&&i().catch(e=>{console.log("Error acquiring local media:"),console.dir(e),b(e)})},[i,l]);const g=e=>{e&&e.preventDefault(),s(rt.deviceSelectionStep)};l===rt.roomNameStep&&e&&t&&g();const v=o.a.createElement(o.a.Fragment,null,qe.a.testPreflight&&o.a.createElement(tt,null),o.a.createElement(He,{error:h}));return o.a.createElement(Ae,{subContent:l===rt.deviceSelectionStep&&v},l===rt.roomNameStep&&o.a.createElement(at,{name:u,roomName:p,setName:d,setRoomName:f,handleSubmit:g}),l===rt.deviceSelectionStep&&o.a.createElement(je,{name:u,roomName:p,setStep:s}))}function it(){const e=Y();return o.a.createElement(Ve,{variant:"error",headline:"Connection Lost:",message:"Reconnecting to room...",open:"reconnecting"===e})}!function(e){e[e.roomNameStep=0]="roomNameStep",e[e.deviceSelectionStep=1]="deviceSelectionStep"}(rt||(rt={}));const ct=Object(i.styled)("div")({display:"flex",alignItems:"flex-end","& div":{width:"2px",marginRight:"1px","&:not(:last-child)":{borderRight:"none"}}}),lt=[0,1,2,3,4];function st({participant:e}){const t=function(e){const[t,n]=Object(r.useState)(e.networkQualityLevel);return Object(r.useEffect)(()=>{const t=e=>n(e);return n(e.networkQualityLevel),e.on("networkQualityLevelChanged",t),()=>{e.off("networkQualityLevelChanged",t)}},[e]),t}(e);return null===t?null:o.a.createElement(ct,null,lt.map(e=>o.a.createElement("div",{key:e,style:{height:3*(e+1)+"px",background:t>e?"white":"rgba(255, 255, 255, 0.2)"}})))}var ut=n(46),dt=n.n(ut);function mt(){return o.a.createElement(ae.a,{title:"Participant is pinned. Click to un-pin.",placement:"top"},o.a.createElement(dt.a,{style:{float:"right",background:"rgba(0, 0, 0, 0.5)",padding:"0.1em",boxSizing:"content-box"},width:"26",height:"26",viewBox:"0 0 26 26"},o.a.createElement("path",{fill:"#FFF",fillRule:"evenodd",strokeWidth:"0",d:"M15.808 4.489c.208-.207.544-.207.75 0l4.953 4.952c.207.207.207.543 0 .75l-1.415 1.415c-.207.208-.543.208-.75 0l-.333-.333-3.007 3.007v2.611c0 .113-.035.222-.1.312l-.055.063-1.06 1.062c-.208.207-.544.207-.751 0l-2.809-2.81-5.992 5.993c-.207.207-.543.207-.75 0-.184-.184-.205-.47-.062-.677l.062-.073 5.991-5.993-2.808-2.808c-.184-.184-.204-.47-.061-.677l.061-.073 1.062-1.061c.1-.1.234-.156.375-.156h2.61l3.007-3.007-.332-.332c-.185-.184-.205-.47-.062-.677l.062-.073zm.376 1.125l-.666.664.333.333c.185.184.205.47.062.677l-.062.074-3.537 3.537c-.1.1-.234.155-.375.155h-2.61l-.531.531 2.803 2.803.005.006.005.005 2.804 2.803.53-.531v-2.61c0-.112.036-.221.102-.311l.054-.064 3.537-3.537c.208-.208.544-.208.75 0l.333.332.664-.666-4.201-4.201z"})))}function pt(e){const[t,n]=Object(r.useState)(e&&e.isSwitchedOff);return Object(r.useEffect)(()=>{if(n(e&&e.isSwitchedOff),e){const t=()=>n(!0),a=()=>n(!1);return e.on("switchedOff",t),e.on("switchedOn",a),()=>{e.off("switchedOff",t),e.off("switchedOn",a)}}},[e]),!!t}function ft(e){const[t,n]=Object(r.useState)([]);return Object(r.useEffect)(()=>{n(Array.from(e.tracks.values()));const t=e=>n(t=>[...t,e]),a=e=>n(t=>t.filter(t=>t!==e));return e.on("trackPublished",t),e.on("trackUnpublished",a),()=>{e.off("trackPublished",t),e.off("trackUnpublished",a)}},[e]),t}function ht(e){const[t,n]=Object(r.useState)(e&&e.track);return Object(r.useEffect)(()=>{if(n(e&&e.track),e){const t=()=>n(null);return e.on("subscribed",n),e.on("unsubscribed",t),()=>{e.off("subscribed",n),e.off("unsubscribed",t)}}},[e]),t}function bt(e){const[t,n]=Object(r.useState)(!1);return Object(r.useEffect)(()=>{const t=()=>n(!0),a=()=>n(!1);return a(),e.on("reconnecting",t),e.on("reconnected",a),()=>{e.off("reconnecting",t),e.off("reconnected",a)}},[e]),t}const gt=Object(i.makeStyles)(e=>Object(i.createStyles)({container:{position:"relative",display:"flex",alignItems:"center",height:0,overflow:"hidden",marginBottom:"2em","& video":{filter:"none",objectFit:"contain !important"},borderRadius:"4px",border:"2px solid rgb(245, 248, 255)",paddingTop:"calc(56.25% - 2px)",background:"black",[e.breakpoints.down("sm")]:{height:e.sidebarMobileHeight,width:16*e.sidebarMobileHeight/9+"px",marginRight:"8px",marginBottom:"0",fontSize:"10px",paddingTop:e.sidebarMobileHeight-2+"px"}},innerContainer:{position:"absolute",top:0,left:0,width:"100%",height:"100%"},infoContainer:{position:"absolute",zIndex:2,display:"flex",flexDirection:"column",justifyContent:"space-between",height:"100%",width:"100%",background:"transparent",top:0},avatarContainer:{display:"flex",alignItems:"center",justifyContent:"center",background:"black",position:"absolute",top:0,right:0,bottom:0,left:0,zIndex:1,[e.breakpoints.down("sm")]:{"& svg":{transform:"scale(0.7)"}}},reconnectingContainer:{position:"absolute",top:0,right:0,bottom:0,left:0,display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(40, 42, 43, 0.75)",zIndex:1},screenShareIconContainer:{background:"rgba(0, 0, 0, 0.5)",padding:"0.18em 0.3em",marginRight:"0.3em",display:"flex","& path":{fill:"white"}},identity:{background:"rgba(0, 0, 0, 0.5)",color:"white",padding:"0.18em 0.3em",margin:0,display:"flex",alignItems:"center"},infoRowBottom:{display:"flex",justifyContent:"space-between",position:"absolute",bottom:0,left:0},networkQualityContainer:{width:"28px",height:"28px",display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(0, 0, 0, 0.5)"},typeography:{color:"white",[e.breakpoints.down("sm")]:{fontSize:"0.75rem"}},hideParticipant:{display:"none"},cursorPointer:{cursor:"pointer"}}));function vt({participant:e,onClick:t,isSelected:n,children:a,isLocalParticipant:r,hideParticipant:i}){const c=ft(e),l=c.find(e=>"audio"===e.kind),s=c.find(e=>e.trackName.includes("camera")),d=Boolean(s),m=c.find(e=>e.trackName.includes("screen")),p=pt(ht(s)),f=ht(l),h=bt(e),b=gt();return o.a.createElement("div",{className:u()(b.container,{[b.hideParticipant]:i,[b.cursorPointer]:Boolean(t)}),onClick:t,"data-cy-participant":e.identity},o.a.createElement("div",{className:b.infoContainer},o.a.createElement("div",{className:b.networkQualityContainer},o.a.createElement(st,{participant:e})),o.a.createElement("div",{className:b.infoRowBottom},m&&o.a.createElement("span",{className:b.screenShareIconContainer},o.a.createElement(te,null)),o.a.createElement("span",{className:b.identity},o.a.createElement(S,{audioTrack:f}),o.a.createElement(W.a,{variant:"body1",className:b.typeography,component:"span"},e.identity,r&&" (You)"))),o.a.createElement("div",null,n&&o.a.createElement(mt,null))),o.a.createElement("div",{className:b.innerContainer},(!d||p)&&o.a.createElement("div",{className:b.avatarContainer},o.a.createElement(de,null)),h&&o.a.createElement("div",{className:b.reconnectingContainer},o.a.createElement(W.a,{variant:"body1",className:b.typeography},"Reconnecting...")),a))}function Et({track:e}){const{activeSinkId:t}=Object(a.b)(),n=Object(r.useRef)();return Object(r.useEffect)(()=>(n.current=e.attach(),n.current.setAttribute("data-cy-audio-track-name",e.name),document.body.appendChild(n.current),()=>e.detach().forEach(e=>e.remove())),[e]),Object(r.useEffect)(()=>{var e,a;null===(a=null===(e=n.current)||void 0===e?void 0:e.setSinkId)||void 0===a||a.call(e,t)},[t]),null}function wt({publication:e,isLocalParticipant:t,videoOnly:n,videoPriority:a}){const r=ht(e);if(!r)return null;switch(r.kind){case"video":return o.a.createElement(L,{track:r,priority:a,isLocal:r.name.includes("camera")&&t});case"audio":return n?null:o.a.createElement(Et,{track:r});default:return null}}function kt({participant:e,videoOnly:t,enableScreenShare:n,videoPriority:a,isLocalParticipant:r}){const i=ft(e);let c;return c=n&&i.some(e=>e.trackName.includes("screen"))?i.filter(e=>!e.trackName.includes("camera")):i.filter(e=>!e.trackName.includes("screen")),o.a.createElement(o.a.Fragment,null,c.map(n=>o.a.createElement(wt,{key:n.kind,publication:n,participant:e,isLocalParticipant:r,videoOnly:t,videoPriority:a})))}function yt({participant:e,videoOnly:t,enableScreenShare:n,onClick:a,isSelected:r,isLocalParticipant:i,hideParticipant:c}){return o.a.createElement(vt,{participant:e,onClick:a,isSelected:r,isLocalParticipant:i,hideParticipant:c},o.a.createElement(kt,{participant:e,videoOnly:t,enableScreenShare:n,isLocalParticipant:i}))}function Ct(){const{room:e}=Object(m.a)(),[t,n]=Object(r.useState)(e.dominantSpeaker);return Object(r.useEffect)(()=>{const t=e=>{null!==e&&n(e)},a=e=>{n(t=>t===e?null:t)};return e.on("dominantSpeakerChanged",t),e.on("participantDisconnected",a),()=>{e.off("dominantSpeakerChanged",t),e.off("participantDisconnected",a)}},[e]),t}function xt(){const{room:e}=Object(m.a)(),t=Ct(),[n,a]=Object(r.useState)(Array.from(e.participants.values()));return Object(r.useEffect)(()=>{t&&a(e=>[t,...e.filter(e=>e!==t)])},[t]),Object(r.useEffect)(()=>{const t=e=>a(t=>[...t,e]),n=e=>a(t=>t.filter(t=>t!==e));return e.on("participantConnected",t),e.on("participantDisconnected",n),()=>{e.off("participantConnected",t),e.off("participantDisconnected",n)}},[e]),n}var Ot=n(14);function jt(){const[e]=Object(Ot.b)(),t=re(),n=Ct(),a=xt(),{room:{localParticipant:r}}=Object(m.a)();return e||(t!==r?t:null)||n||a[0]||r}const St=Object(i.makeStyles)(e=>Object(i.createStyles)({container:{padding:"2em",overflowY:"auto",background:"rgb(79, 83, 85)",gridArea:"1 / 2 / 1 / 3",zIndex:5,[e.breakpoints.down("sm")]:{gridArea:"2 / 1 / 3 / 3",overflowY:"initial",overflowX:"auto",display:"flex",padding:"8px"}},transparentBackground:{background:"transparent"},scrollContainer:{[e.breakpoints.down("sm")]:{display:"flex"}}}));function Tt(){const e=St(),{room:{localParticipant:t}}=Object(m.a)(),n=xt(),[a,r]=Object(Ot.b)(),i=re(),c=jt(),l=i&&i!==t;return 0===n.length?null:o.a.createElement("aside",{className:u()(e.container,{[e.transparentBackground]:!l})},o.a.createElement("div",{className:e.scrollContainer},o.a.createElement(yt,{participant:t,isLocalParticipant:!0}),n.map(e=>{const t=e===c&&e!==i&&!(e===a);return o.a.createElement(yt,{key:e.sid,participant:e,isSelected:e===a,onClick:()=>r(e),hideParticipant:t})})))}const Nt=Object(i.makeStyles)(e=>({container:{position:"relative",display:"flex",alignItems:"center"},identity:{background:"rgba(0, 0, 0, 0.5)",color:"white",padding:"0.1em 0.3em 0.1em 0",fontSize:"1.2em",display:"inline-flex","& svg":{marginLeft:"0.3em"}},infoContainer:{position:"absolute",zIndex:2,height:"100%",width:"100%"},reconnectingContainer:{position:"absolute",top:0,right:0,bottom:0,left:0,display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(40, 42, 43, 0.75)",zIndex:1},fullWidth:{gridArea:"1 / 1 / 2 / 3",[e.breakpoints.down("sm")]:{gridArea:"1 / 1 / 3 / 3"}},avatarContainer:{display:"flex",alignItems:"center",justifyContent:"center",background:"black",position:"absolute",top:0,right:0,bottom:0,left:0,zIndex:1,"& svg":{transform:"scale(2)"}}}));function Pt({participant:e,children:t}){const n=Nt(),{room:{localParticipant:a}}=Object(m.a)(),r=a===e,i=re(),c=i&&i!==a,l=ft(e),s=l.find(e=>e.trackName.includes("camera")),d=l.find(e=>e.trackName.includes("screen")),p=ht(d||s),f=Boolean(p),h=ht(l.find(e=>"audio"===e.kind)),b=pt(p),g=bt(e);return o.a.createElement("div",{"data-cy-main-participant":!0,"data-cy-participant":e.identity,className:u()(n.container,{[n.fullWidth]:!c})},o.a.createElement("div",{className:n.infoContainer},o.a.createElement("div",{className:n.identity},o.a.createElement(S,{audioTrack:h}),o.a.createElement(W.a,{variant:"body1",color:"inherit"},e.identity,r&&" (You)",d&&" - Screen"))),(!f||b)&&o.a.createElement("div",{className:n.avatarContainer},o.a.createElement(de,null)),g&&o.a.createElement("div",{className:n.reconnectingContainer},o.a.createElement(W.a,{variant:"body1",style:{color:"white"}},"Reconnecting...")),t)}function Lt(){const e=jt(),{room:{localParticipant:t}}=Object(m.a)(),[n]=Object(Ot.b)(),a=re(),r=e!==n&&e!==a||e===t?null:"high";return o.a.createElement(Pt,{participant:e},o.a.createElement(kt,{participant:e,videoOnly:!0,enableScreenShare:e!==t,videoPriority:r,isLocalParticipant:e===t}))}const At=Object(i.styled)("div")(({theme:e})=>({position:"relative",height:"100%",display:"grid",gridTemplateColumns:`1fr ${e.sidebarWidth}px`,gridTemplateRows:"100%",[e.breakpoints.down("sm")]:{gridTemplateColumns:"100%",gridTemplateRows:`1fr ${e.sidebarMobileHeight+16}px`}}));function It(){return o.a.createElement(At,null,o.a.createElement(Lt,null),o.a.createElement(Tt,null))}const Dt=Object(i.styled)("div")({display:"grid",gridTemplateRows:"1fr auto"}),Bt=Object(i.styled)("main")(({theme:e})=>({overflow:"hidden",paddingBottom:e.footerHeight+"px",background:"black",[e.breakpoints.down("sm")]:{paddingBottom:e.mobileFooterHeight+e.mobileTopBarHeight+"px"}}));function Mt({userName:e,roomName:t}){const n=Y(),a=function(){var e;const[t,n]=Object(r.useState)(window.innerHeight*((null===(e=window.visualViewport)||void 0===e?void 0:e.scale)||1));return Object(r.useEffect)(()=>{const e=()=>{var e;n(window.innerHeight*((null===(e=window.visualViewport)||void 0===e?void 0:e.scale)||1))};return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}),t+"px"}();return o.a.createElement(Dt,{style:{height:a}},"disconnected"===n?o.a.createElement(ot,{startUserName:e,startRoomName:t}):o.a.createElement(Bt,null,o.a.createElement(it,null),o.a.createElement(ue,null),o.a.createElement(It,null),o.a.createElement(le,null)))}var Rt=n(22),zt=n.n(Rt),Ft=n(24),Vt=n.n(Ft),Ht=n(23),_t=n.n(Ht),qt=n(25),Gt=n.n(qt),Wt=n(13),Ut=n.n(Wt);var Yt=function({dismissError:e,error:t}){const{message:n,code:a}=t||{},r=function(e="",t){switch(t){case 20101:return e+". Please make sure you are using the correct credentials.";default:return e}}(n,a);return o.a.createElement(zt.a,{open:null!==t,onClose:()=>e(),fullWidth:!0,maxWidth:"xs"},o.a.createElement(Gt.a,null,"ERROR"),o.a.createElement(Vt.a,null,o.a.createElement(Ut.a,null,r),Boolean(a)&&o.a.createElement("pre",null,o.a.createElement("code",null,"Error Code: ",a))),o.a.createElement(_t.a,null,o.a.createElement(l.a,{onClick:()=>e(),color:"primary",autoFocus:!0},"OK")))},$t=n(29),Qt=n(12);const Kt=Object(i.makeStyles)({container:{marginTop:"2.5em"},paper:{padding:"1em"},heading:{marginBottom:"0.4em"}});var Zt=function({children:e}){const t=Kt();return qe.a.isSupported?e:o.a.createElement(d.Container,null,o.a.createElement(d.Grid,{container:!0,justify:"center",className:t.container},o.a.createElement(d.Grid,{item:!0,xs:12,sm:6},o.a.createElement(d.Paper,{className:t.paper},o.a.createElement(d.Typography,{variant:"h4",className:t.heading},"Browser or context not supported"),o.a.createElement(d.Typography,null,"Please open this application in one of the"," ",o.a.createElement(d.Link,{href:"https://www.twilio.com/docs/video/javascript#supported-browsers",target:"_blank",rel:"noopener"},"supported browsers"),".",o.a.createElement("br",null),"If you are using a supported browser, please ensure that this app is served over a"," ",o.a.createElement(d.Link,{href:"https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts",target:"_blank",rel:"noopener"},"secure context")," ","(e.g. https or localhost).")))))};t.default={VideoApp:function({userName:e,roomName:t}){const{error:n,setError:r}=Object(a.b)(),i=function(){var e;const{roomType:t,settings:n}=Object(a.b)(),r={bandwidthProfile:{video:{mode:n.bandwidthProfileMode,dominantSpeakerPriority:n.dominantSpeakerPriority,renderDimensions:{low:ge(n.renderDimensionLow),standard:ge(n.renderDimensionStandard),high:ge(n.renderDimensionHigh)},maxTracks:Number(n.maxTracks)}},dominantSpeaker:!0,networkQuality:{local:1,remote:1},maxAudioBitrate:Number(n.maxAudioBitrate),preferredVideoCodecs:[{codec:"VP8",simulcast:"peer-to-peer"!==t&&"go"!==t}]};return Qt.a&&(null===(e=null==r?void 0:r.bandwidthProfile)||void 0===e?void 0:e.video)&&(r.bandwidthProfile.video.maxSubscriptionBitrate=25e5),Object(Qt.b)(r)}();return o.a.createElement(Zt,null,o.a.createElement($t.b,{options:i,onError:r},o.a.createElement(Yt,{dismissError:()=>r(null),error:n}),o.a.createElement(Mt,{userName:e,roomName:t})))},AppStateProvider:a.a}}])}));