this is way over complicated but mostly working


but sometimes setMessages is being cleared out, not sure why yet.

